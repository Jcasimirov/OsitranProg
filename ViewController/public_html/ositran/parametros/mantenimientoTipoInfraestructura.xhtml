<?xml version='1.0' encoding='windows-1252'?>
<!DOCTYPE html>
<f:view xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets">
    <html xmlns="http://www.w3.org/1999/xhtml" xmlns:p="http://primefaces.org/ui">
        <h:head>
            <link href="#{request.contextPath}/css/style.css" rel="stylesheet" type="text/css"/>
            <style type="text/css">
                .ui-dialog-titlebar {
                    font-size: 13px;
                    font-family: sans-serif;
                }
            </style>
            
            
            <script src="../../js/validaciones.js" type="text/javascript"></script>
            
        </h:head>
        <h:body>
            <f:event listener="#{infraestructuraMB.validarSesion}" type="postAddToView"></f:event>
            <f:event listener="#{infraestructuraMB.ListarInfraestructura}" type="postAddToView"></f:event>
             
            <h:form id="form">
                <p:growl id="mensaje" showDetail="true" life="10000"/>
                <p:layout fullPage="true" style="border:none">
                    <p:layoutUnit position="center" style="border:0px">
                        <ui:include src="/ositran/util/menuOpciones.xhtml"/>
                        <div align="center">
                            <h5 style="color:Black;font-weight:bold;font-family: sans-serif;">
                                #{msg.tituloMTI}
                            </h5>
                        </div>
                        <div align="center">
                            <table style="width:80% ;font-size:11px;" rendered="#{infraestructuraMB.rolOpcion.troConsultar  eq 1}">
                                <tr>
                                    <td>
                                        <p:fieldset legend="Criterio de Busqueda" 
                                                    
                                                    style="width:10%;margin-bottom:5px;">
                                            <table>
                                                <tr>
                                                    <td>
                                                        #{etq.etq_nombre}:
                                                    </td>
                                                    <td>
                                                        <p:inputText id="nomInfraSearch" size="25"
                                                                     value="#{infraestructuraMB.nomInfraSearch}"
                                                                     onkeyup="pasarMayuscula(this.value,this.id)"/>
                                                    </td>
                                                    <td>
                                                        #{etq.etq_des}:
                                                    </td>
                                                    <td>
                                                        <p:inputText id="desInfraSearch" size="25"
                                                                     value="#{infraestructuraMB.desInfraSearch}"
                                                                     onkeyup="pasarMayuscula(this.value,this.id)"/>
                                                    </td>
                                                    <td>
                                                        <p:commandButton image="ui-icon-search" id="buscartodos"
                                                                         update=":form:tablaMTI"
                                                                         action="#{infraestructuraMB.SearchListaInfra}"/>
                                                         
                                                        <p:tooltip styleClass="tool" id="tool1" for="buscartodos"
                                                                   value="Buscar por Nombre / Descripcion de tipo de Infraestructura"/>
                                                    </td>
                                                    <td>
                                                        <p:commandButton value="#{btn.btn_limpiar}" id="limpiarcampo"
                                                                         type="reset"/>
                                                         
                                                        <p:tooltip styleClass="tool" id="tool2" for="limpiarcampo"
                                                                   value="Limpiar los campos de busqueda"/>
                                                    </td>
                                                </tr>
                                                 
                                                <tr></tr>
                                            </table>
                                        </p:fieldset>
                                    </td>
                                    <td align="right" colspan="3">
                                        <p:commandButton value="Nuevo Tipo de Infraestructura" id="nuevoinfra"
                                                         onclick="popupagregar.show()" type="reset"
                                                         rendered="#{infraestructuraMB.rolOpcion.troAgregar  eq 1}"
                                                         image="ui-icon-document"/>
                                         
                                        <p:tooltip styleClass="tool" id="tool3" for="nuevoinfra"
                                                   value="Adiciona registro de tipo de Infraestructura"/>
                                    </td>
                                </tr>
                                 
                                <tr>
                                    <td colspan="3">
                                        <p:dataTable style="font-size:11px;" id="tablaMTI" var="mti"
                                                     value="#{infraestructuraMB.listaInfraestructura}" rows="10"
                                                     paginator="true" paginatorPosition="bottom"
                                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                     rowsPerPageTemplate="5,10,15" selectionMode="single"
                                                     rowKey="#{mti.tinId}" rowIndexVar="rowIndex">
                                                     
                                            <p:column headerText="N°" style="width:3%">
                                            <h:outputText value=" #{rowIndex+1}" style="text-transform:uppercase;"/>
                                        </p:column>
                                            <p:column>
                                                <f:facet name="header">
                                                    <h:outputText value="Nombres"/>
                                                </f:facet>
                                                <h:outputText value="#{mti.tinNombre}"/>
                                            </p:column>
                                            <p:column>
                                                <f:facet name="header">
                                                    <h:outputText value="Descripcion"/>
                                                </f:facet>
                                                <h:outputText value="#{mti.tinDescripcion}"/>
                                            </p:column>
                                            <p:column width="8" rendered="#{infraestructuraMB.rolOpcion.troModificar  eq 1}">
                                                <f:facet name="header">
                                                    <h:outputText value="Actualizar"/>
                                                </f:facet>
                                                <div align="center">
                                                    <p:commandButton update=":form:popupeditar"
                                                                     action="#{infraestructuraMB.cargarEditar(mti)}"
                                                                     oncomplete="popupeditar.show()"
                                                                     
                                                                     image="ui-icon-document"
                                                                     style="width:25px;height:25px"/>
                                                </div>
                                            </p:column>
                                            <p:column width="8" rendered="#{infraestructuraMB.rolOpcion.troEliminar  eq 1}">
                                                <f:facet name="header">
                                                    <h:outputText value="Eliminar"/>
                                                </f:facet>
                                                <div align="center">
                                                    <p:commandButton update=":form:popupeliminar :form:codEliminar"
                                                                     actionListener="#{infraestructuraMB.cargarEliminar(mti.tinId,mti.tinNombre)}"
                                                                     oncomplete="popupeliminar.show()"
                                                                     
                                                                     image="ui-icon-closethick"
                                                                     style="width:25px;height:25px"/>
                                                </div>
                                            </p:column>
                                        </p:dataTable>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </p:layoutUnit>
                    <h:inputHidden value="#{infraestructuraMB.codigoEliminar}" id="codEliminar"/>
                </p:layout>
                <!-- pdialog para boton eliminar -->
                <p:dialog id="popupeliminar" widgetVar="popupeliminar" header="Confirmar" modal="true">
                    <table style="font-size: 11px">
                        <tr>
                            <td colspan="2">
                                Eliminar el tipo de infraestructura: " 
                                #{infraestructuraMB.nombreEliminar}"
                            </td>
                        </tr>
                         
                        <tr>
                            <td align="right">
                                <p:commandButton update=":form:tablaMTI :form:mensaje"
                                                 actionListener="#{infraestructuraMB.eliminar}" value="Eliminar"
                                                 oncomplete="popupeliminar.hide()"/>
                            </td>
                            <td align="left">
                                <p:commandButton value="Cancelar" onclick="popupeliminar.hide()"/>
                            </td>
                        </tr>
                    </table>
                </p:dialog>
                <!-- fin pdialog para boton eliminar -->
                <!-- pdialog para boton agregar -->
                <p:dialog header="Agregar Tipo de Infraestructura" widgetVar="popupagregar" modal="true"
                          resizable="false" style="text-align:center;">
                    <table style="margin-bottom:5px;font-size: 11px;text-align:center">
                        <tr>
                            <td align="left">
                                #{etq.etq_ntinfra}
                            </td>
                            <td align="left">
                                <p:inputText value="#{infraestructuraMB.tinNombre}" style="width:300px"
                                             onkeyup="pasarMayuscula(this.value,this.id)"
                                             onkeydown="return validarLetras(event)"/>
                                 
                                <img src="../../images/obligatorio.gif"/>
                            </td>
                        </tr>
                         
                        <tr>
                            <td align="left">
                                #{etq.etq_dtinfra}
                            </td>
                            <td align="left">
                                <p:inputText value="#{infraestructuraMB.tinDescripcion}"
                                             style="width:300px; height:40px"
                                             onkeyup="pasarMayuscula(this.value,this.id)"/>
                                 
                                <img src="../../images/obligatorio.gif" style="top: 10px"/>
                            </td>
                        </tr>
                         
                        <tr>
                            <td align="right" colspan="2" style="font-size: 10px;font-style: oblique; color: Red;">
                                Campos obligatorios ( 
                                <img src="../../images/obligatorio.gif"/>)
                            </td>
                        </tr>
                         
                        <tr>
                            <td align="center" colspan="2">
                                <p:commandButton update=":form:tablaMTI :form:mensaje"
                                                 action="#{infraestructuraMB.guardar}" style="width:70px"
                                                 value="#{btn.btn_guardar}"/>
                                 
                                <p:commandButton value="#{btn.btn_salir}" oncomplete="popupagregar.hide()"
                                                 style="width:70px"/>
                            </td>
                        </tr>
                    </table>
                </p:dialog>
                <!-- fin pdialog para boton agregar -->
                <!-- pdialog para boton editar -->
                <p:dialog id="popupeditar" header="Modificar Tipo de Infraestructura" widgetVar="popupeditar"
                          modal="true" resizable="false" minWidth="200">
                    <div align="center" style="width: 100%">
                        <table style="margin-bottom:5px;font-size: 11px;text-align:center">
                            <tr>
                                <td>
                                    <h:inputHidden value="#{infraestructuraMB.codigoE}"/>
                                </td>
                            </tr>
                             
                            <tr>
                                <td align="left">
                                    #{etq.etq_ntinfra}
                                </td>
                                <td align="left">
                                    <p:inputText value="#{infraestructuraMB.tinNombreE}" size="30" maxlength="50"
                                                 onkeyup="pasarMayuscula(this.value,this.id)"
                                                 onkeydown="return validarLetras(event)"/>
                                </td>
                            </tr>
                             
                            <tr>
                                <td align="left">
                                    #{etq.etq_dtinfra}
                                </td>
                                <td align="left">
                                    <p:inputTextarea value="#{infraestructuraMB.tinDescripcionE}" style="width:250px"
                                                     onkeyup="pasarMayuscula(this.value,this.id)"/>
                                </td>
                            </tr>
                             
                            <tr>
                                <td align="center" colspan="2">
                                    <p:commandButton update=":form:tablaMTI :form:mensaje"
                                                     oncomplete="popupeditar.hide()"
                                                     action="#{infraestructuraMB.editar}" style="width:70px"
                                                     value="#{btn.btn_modificar}"/>
                                     
                                    <p:commandButton value="#{btn.btn_salir}" oncomplete="popupeditar.hide()"/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </p:dialog>
                <!-- fin pdialog para boton editar -->
            </h:form>
        </h:body>
    </html>
    <!--oracle-jdev-comment:auto-binding-backing-bean-name:backing_ositran_parametros_mantenimientoTipoInfraestructura-->
</f:view>