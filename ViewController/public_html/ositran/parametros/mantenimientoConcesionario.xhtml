
<!DOCTYPE html>
<f:view xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets">
    <html xmlns="http://www.w3.org/1999/xhtml" xmlns:p="http://primefaces.org/ui">
        <h:head>
            <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
            <link href="#{request.contextPath}/css/diseño.css" rel="stylesheet" type="text/css"/>
            <script type="text/javascript">
              function pasarMayuscula(obj, id) {
                  obj = obj.toUpperCase();
                  document.getElementById(id).value = obj;
              }

              function pasarMinuscula(obj, id) {
                  obj = obj.toLowerCase();
                  document.getElementById(id).value = obj;
              }
              function validarEmail(email){
              
              if (email==''){
              }
               else 
               {
               expr = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
                if ( !expr.test(email) )
                    alert("Error: La dirección de correo " + email + " es incorrecta.");
                    }
                    document.getElementById('email').value="";
              }
            </script>
        </h:head>
        <h:body>
            <f:event listener="#{concesionarioMB.cargarListaTipoDocumento}" type="postAddToView"></f:event>
             
            <f:event listener="#{concesionarioMB.cargarListaCargo}" type="postAddToView"></f:event>
             
            <f:event listener="#{concesionarioMB.cargarListaConcesionarios}" type="postAddToView"></f:event>
             cargarListaCargo 
            <h:form id="form">
                <p:growl id="mensaje" showDetail="true" life="10000"/>
                <p:messages autoUpdate="true"/>
                <p:layout fullPage="true" style="border:none">
                    <p:layoutUnit position="center" style="border:0px">
                        <ui:include src="/ositran/util/menu.xhtml"/>
                        <div align="center">
                            <h3 class="titulo">MANTENIMIENTO CONCESIONARIO</h3>
                            <div style="width:75%">
                                <div align="left" style="font-size: 11px">
                                    <table width="100%">
                                        <tr>
                                            <td align="left">
                                                <p:commandButton type="reset" image="ui-icon-circle-plus"
                                                                 onclick="insertarPanel.show()"
                                                                 value=" Nuevo Concesionario"/>
                                            </td>
                                            <td align="right">
                                                Ingrese Criterio Busqueda: 
                                                <p:inputText id="buscarT" value="#{concesionarioMB.buscar}"/><h:outputText value=" "/>
                                                 
                                                <p:commandButton actionListener="#{concesionarioMB.busqueda}"
                                                                 update=":form:tablaC" image="ui-icon-search"/><h:outputText value=" "/>
                                                 
                                                <p:commandButton actionListener="#{concesionarioMB.cargarListaConcesionarios}"
                                                                 update=":form:tablaC" value="Ver Todos"></p:commandButton>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                                <br></br>
                                 
                                <p:dataTable emptyMessage="NO SE ENCONTRARON DATOS" paginator="true"
                                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="6,8,10" resizableColumns="true"
                                             style="font-size:11px;" id="tablaC" var="concesionario"
                                             value="#{concesionarioMB.listaCon}">
                                    <p:column headerText="ID" style="width:5%">
                                        <h:outputText value="#{concesionario.cncId}"/>
                                    </p:column>
                                    <p:column headerText="Descripcion" style="width:15%">
                                        <h:outputText value="#{concesionario.cncDescripcion}"/>
                                    </p:column>
                                    <p:column headerText="R.Legal" style="width:45%">
                                        <h:outputText value="#{concesionario.cncRepresentanteLegal}"/>
                                    </p:column>
                                    <p:column headerText="N Doc" style="width:15%">
                                        <h:outputText value="#{concesionario.cncNroDocumento}"></h:outputText>
                                    </p:column>
                                    <p:column headerText="Creacion:" style="width:10%">
                                        <h:outputText value="#{concesionario.cncFechaAlta}">
                                            <f:convertDateTime pattern="MM/dd/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Edicion:" style="width:10%">
                                        <h:outputText value="#{concesionario.cncFechaCambio}">
                                            <f:convertDateTime pattern="MM/dd/yyyy"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Edi" style="width:5%">
                                        <p:commandButton oncomplete="editarPanel.show()"
                                                         update=":form:editarPanel :form:oculto1"
                                                         actionListener="#{concesionarioMB.cargarEditar(concesionario)}"
                                                         image="ui-icon-document" style="width:25px;height:25px"/>
                                    </p:column>
                                    <p:column headerText="Eli" style="width:5%">
                                        <p:commandButton actionListener="#{concesionarioMB.cargarEliminar(concesionario)}"
                                                         update=":form:confirEliminar :form:oculto"
                                                         oncomplete="confirEliminar.show()" image="ui-icon-closethick"
                                                         style="width:25px;height:25px"/>
                                    </p:column>
                                </p:dataTable>
                            </div>
                        </div>
                    </p:layoutUnit>
                    <p:layoutUnit position="south" style="border:0px;width:98%" resizable="true" closable="true"
                                  collapsible="true">
                        <div align="center" style="font-size: 10px;font-weight: bold;">Proyecto Ositran-Developer Por
                                                                                       AsisTP-2015</div>
                    </p:layoutUnit>
                </p:layout>
                <p:dialog id="confirEliminar" widgetVar="confirEliminar" header="Confirmar" modal="true">
                    <table style="font-size: 11px">
                        <tr>
                            <td colspan="2">
                                Eliminar el tipo de inversion: " 
                                #{concesionarioMB.descripcion}"
                            </td>
                        </tr>
                         
                        <tr>
                            <td align="right">
                                <p:commandButton update=":form:tablaC :form:mensaje" value="Eliminar"
                                                 actionListener="#{concesionarioMB.eliminar}"
                                                 oncomplete="confirEliminar.hide()"></p:commandButton>
                            </td>
                            <td align="left">
                                <p:commandButton value="Cancelar" onclick="confirEliminar.hide()"></p:commandButton>
                            </td>
                        </tr>
                    </table>
                </p:dialog>
                <p:dialog header="Editar" widgetVar="editarPanel" id="editarPanel" modal="true"
                          style="text-align:center;">
                     <table style="margin-bottom:5px;font-size:11px;text-align:center">
                        <tr>
                            <td colspan="1" align="left">Ingrese Nombre:</td>
                            <td colspan="3" align="left">
                                <p:inputText maxlength="50" style="width:70%"
                                             onkeyup="pasarMayuscula(this.value,this.id)"
                                             value="#{concesionarioMB.nombreE}" label="Nombre" id="nombreE"/>
                            </td>
                        </tr>
                         
                        <tr>
                            <td colspan="1" align="left">Descripcion:</td>
                            <td colspan="3" align="left">
                                <p:inputTextarea onkeyup="pasarMayuscula(this.value,this.id)" style="width:97.5%"
                                                 maxlength="50" value="#{concesionarioMB.descripcionE}"
                                                 label="descripcion" id="descripcionE"/>
                            </td>
                        </tr>
                         
                        <tr>
                            <td align="left">Siglas del Nombre:</td>
                            <td align="left">
                                <p:inputText onkeyup="pasarMayuscula(this.value,this.id)" onkeypress="mostrar()"
                                             maxlength="6" value="#{concesionarioMB.siglasNombreE}"/>
                            </td>
                            <td align="left">Telefono:</td>
                            <td align="left">
                                <p:inputMask id="telefono" mask="9?9999999999" maxlength="20"
                                             value="#{concesionarioMB.telefonoE}"/>
                            </td>
                        </tr>
                         
                        <tr>
                            <td align="left">Tipo Documento:</td>
                            <td align="left">
                                <p:selectOneMenu widgetVar="tipoDocumentoR" id="tipoDocumentoRE"
                                                 value="#{concesionarioMB.tipDocumentoE}" style="width:100%">
                                    <f:selectItem itemLabel="-Seleccionar-" itemValue="0"/>
                                    <f:selectItems value="#{concesionarioMB.listaTipoDoc}" var="tip"
                                                   itemLabel="#{tip.tdoNombre}" itemValue="#{tip.tdoId}"/>
                                </p:selectOneMenu>
                            </td>
                            <td align="left">Nro Documento:</td>
                            <td align="left" id="documentosE">
                                <p:inputMask mask="9?9999999999" value="#{concesionarioMB.numeroDocumentoE}"
                                             maxlength="11"/>
                            </td>
                        </tr>
                         
                        <tr>
                            <td align="left">Direccion:</td>
                            <td colspan="3" align="left">
                                <p:inputText style="width:70%" onkeyup="pasarMayuscula(this.value,this.id)"
                                             value="#{concesionarioMB.direccionE}"/>
                            </td>
                        </tr>
                         
                        <tr>
                            <td align="left">Correo electronico:</td>
                            <td colspan="3" align="left">
                                <p:inputText style="width:70%" validatorMessage="El Email no es correcto" id="emailE"
                                             onkeyup="pasarMinuscula(this.value,this.id)"
                                             value="#{concesionarioMB.correoE}">
                                    <p:watermark for="email" value="juanp@gmail.com"/>
                                </p:inputText>
                            </td>
                        </tr>
                         
                        <tr>
                            <td align="left">Representante Legal:</td>
                            <td colspan="3" align="left">
                                <p:inputText style="width:70%" maxlength="6"
                                             onkeyup="pasarMayuscula(this.value,this.id)"
                                             value="#{concesionarioMB.representanteE}"/>
                            </td>
                        </tr>
                         
                        <tr>
                            <td colspan="4" align="left">
                                Cargo Representante: 
                                <p:selectOneMenu value="#{concesionarioMB.codigoCargoE}">
                                    <f:selectItem itemLabel="-Seleccionar-" itemValue="0"/>
                                    <f:selectItems value="#{concesionarioMB.listCargo}" var="tip"
                                                   itemLabel="#{tip.crgDescripcion}" itemValue="#{tip.crgId}"/>
                                </p:selectOneMenu>
                            </td>
                        </tr>
                         
                        <tr>
                            <td colspan="4" align="left"></td>
                        </tr>
                         
                        <tr>
                            <td colspan="4" align="left"></td>
                        </tr>
                         
                        <tr>
                            <td colspan="4" align="left"></td>
                        </tr>
                         
                        <tr>
                            <td colspan="2" align="right">
                                <p:commandButton update=":form:tablaC :form:mensaje" oncomplete="editarPanel.hide()"
                                                 action="#{concesionarioMB.editar}" style="width:70px" value="Editar"/>
                            </td>
                            <td colspan="2" align="left">
                                <p:commandButton style="width:70px" value="Salir" onclick="editarPanel.hide ()"/>
                            </td>
                        </tr>
                    </table>
                </p:dialog>
                <h:inputHidden id="oculto" value="#{concesionarioMB.codigoConcesionario}"></h:inputHidden>
                <h:inputHidden id="oculto1" value="#{concesionarioMB.concesionarioId}"></h:inputHidden>
                <p:dialog id="registrar" header="Registrar" widgetVar="insertarPanel" modal="true"
                          style="text-align:center;">
                    <table style="margin-bottom:5px;font-size:11px;text-align:center">
                        <tr>
                            <td colspan="1" align="left">Ingrese Nombre:</td>
                            <td colspan="3" align="left">
                                <p:inputText maxlength="50" style="width:70%"
                                             onkeyup="pasarMayuscula(this.value,this.id)"
                                             value="#{concesionarioMB.nombre}" label="Nombre" id="nombre"/>
                            </td>
                        </tr>
                         
                        <tr>
                            <td colspan="1" align="left">Descripcion:</td>
                            <td colspan="3" align="left">
                                <p:inputTextarea onkeyup="pasarMayuscula(this.value,this.id)" style="width:97.5%"
                                                 maxlength="50" value="#{concesionarioMB.descripcion}"
                                                 label="descripcion" id="descripcion"/>
                            </td>
                        </tr>
                         
                        <tr>
                            <td align="left">Siglas del Nombre:</td>
                            <td align="left">
                                <p:inputText onkeyup="pasarMayuscula(this.value,this.id)" onkeypress="mostrar()"
                                             maxlength="6" value="#{concesionarioMB.siglasNombre}"/>
                            </td>
                            <td align="left">Telefono:</td>
                            <td align="left">
                                <p:inputMask id="telefonoE" mask="9?9999999999" maxlength="20"
                                             value="#{concesionarioMB.telefono}"/>
                            </td>
                        </tr>
                         
                        <tr>
                            <td align="left">Tipo Documento:</td>
                            <td align="left">
                                <p:selectOneMenu widgetVar="tipoDocumentoR" id="tipoDocumentoR"
                                                 value="#{concesionarioMB.tipDocumento}" style="width:100%">
                                    <f:selectItem itemLabel="-Seleccionar-" itemValue="0"/>
                                    <f:selectItems value="#{concesionarioMB.listaTipoDoc}" var="tip"
                                                   itemLabel="#{tip.tdoNombre}" itemValue="#{tip.tdoId}"/>
                                </p:selectOneMenu>
                            </td>
                            <td align="left">Nro Documento:</td>
                            <td align="left" id="documentos">
                                <p:inputMask mask="9?9999999999" value="#{concesionarioMB.numeroDocumento}"
                                             maxlength="11"/>
                            </td>
                        </tr>
                         
                        <tr>
                            <td align="left">Direccion:</td>
                            <td colspan="3" align="left">
                                <p:inputText style="width:70%" onkeyup="pasarMayuscula(this.value,this.id)"
                                             value="#{concesionarioMB.direccion}"/>
                            </td>
                        </tr>
                         
                        <tr>
                            <td align="left">Correo electronico:</td>
                            <td colspan="3" align="left">
                                <p:inputText style="width:70%"   onblur="validarEmail(this.value)"  id="email"
                                             onkeyup="pasarMinuscula(this.value,this.id)"
                                             value="#{concesionarioMB.correo}">
                                    <p:watermark for="email" value="juanp@gmail.com"/>
                                </p:inputText>
                            </td>
                        </tr>
                         
                        <tr>
                            <td align="left">Representante Legal:</td>
                            <td colspan="3" align="left">
                                <p:inputText style="width:70%" maxlength="6"
                                             onkeyup="pasarMayuscula(this.value,this.id)"
                                             value="#{concesionarioMB.representante}"/>
                            </td>
                        </tr>
                         
                        <tr>
                            <td colspan="4" align="left">
                                Cargo Representante: 
                                <p:selectOneMenu value="#{concesionarioMB.codigoCargo}">
                                    <f:selectItem itemLabel="-Seleccionar-" itemValue="0"/>
                                    <f:selectItems value="#{concesionarioMB.listCargo}" var="tip"
                                                   itemLabel="#{tip.crgDescripcion}" itemValue="#{tip.crgId}"/>
                                </p:selectOneMenu>
                            </td>
                        </tr>
                         
                        <tr>
                            <td colspan="4" align="left"></td>
                        </tr>
                         
                        <tr>
                            <td colspan="4" align="left"></td>
                        </tr>
                         
                        <tr>
                            <td colspan="4" align="left"></td>
                        </tr>
                         
                        <tr>
                            <td colspan="2" align="right">
                                <p:commandButton update=":form:tablaC :form:mensaje"
                                                 actionListener="#{concesionarioMB.guardar}" style="width:70px"
                                                 value="#{btn.btn_guardar}"/>
                            </td>
                            <td align="left">
                                <p:commandButton style="width:70px" value="Salir" onclick="insertarPanel.hide ()"/>
                            </td>
                            <td align="right">
                                <p:commandButton type="reset" style="width:70px" value="Limpiar" id="limpiar"/>
                            </td>
                        </tr>
                    </table>
                </p:dialog>
            </h:form>
        </h:body>
    </html>
</f:view>



