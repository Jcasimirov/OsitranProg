<?xml version='1.0' encoding='windows-1252'?>
<!DOCTYPE html>
<f:view xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets">
    <html xmlns="http://www.w3.org/1999/xhtml" xmlns:p="http://primefaces.org/ui">
        <h:head>
            <style type="text/css">
                .ui-dialog-titlebar {
                    font-size: 11px;
                    font-family: sans-serif;
                }
            </style>
            <link href="#{request.contextPath}/css/diseño.css" rel="stylesheet" type="text/css"/>
             
        </h:head>
        <h:body>
            <f:event listener="#{mantenimientoconcesionMB.listarTipInfraestructura}" type="postAddToView"></f:event>
             
            <f:event listener="#{mantenimientoconcesionMB.ListarConcesiones}" type="postAddToView"></f:event>
        
            <h:form id="form">
                <p:growl id="mensaje" life="5000" showDetail="true"/>
                <p:layout fullPage="true" style="border:none">
                    <p:layoutUnit position="center" style="border:0px">
                        <ui:include src="/ositran/util/menu.xhtml"/>
                        <div align="center">
                            <h3 style="color:Black;font-weight:bold;font-family: sans-serif;">Mantenimiento de
                                                                                              Concesiones</h3>
                        </div>
                        <center>
                            <div style="width:80%">
                                <!---->
                                <table style="margin-bottom:5px;font-size: 11px">
                                    <tr>
                                        <td>
                                            <h:outputLabel value="Tipo de Infraestructuras"
                                                           style="align:left; text-align:left"></h:outputLabel>
                                        </td>
                                        <td>
                                            <p:selectOneMenu id="tipobuscar"
                                                             value="#{mantenimientoconcesionMB.codigoTipoInfraestructurafiltro}"
                                                             style="width:300px;text-transform:uppercase;width:70%">
                                                <f:selectItem itemValue="0" itemLabel="-Seleccione-"/>
                                                <f:selectItems value="#{mantenimientoconcesionMB.listaInfraestructuraTipos}"
                                                               var="tip" itemLabel="#{tip.tinNombre}"
                                                               itemValue="#{tip.tinId}"/>
                                            </p:selectOneMenu>
                                        </td>
                                    </tr>
                                     
                                    <tr style=" text-align: left;">
                                        <td>NOMBRE DE LA CONCESI&#211;N:</td>
                                        <td>
                                            <p:inputText id="nombrebuscar"
                                                         value="#{mantenimientoconcesionMB.concesionbuscar}"
                                                         style="width:300px;text-transform:uppercase;"></p:inputText>
                                        </td>
                                        <td>
                                            <p:commandButton value="#{btn.btn_buscar}"
                                                             action="#{mantenimientoconcesionMB.buscarconcesion}"
                                                             update=":form:tablaES"/>
                                             
                                             
                                        
                                         <p:commandButton value="Clear" type="reset"  image="ui-icon-close" />
                                        
                                        </td>
                                        <td style=" width:40%"></td>
                                        <td>
                                            <p:commandButton actionListener="#{mantenimientoconcesionMB.resetear}"
                                                             oncomplete="insertarPanel.show()"
                                                             update=":form:insertarPanel" value="Nueva Concesión"/>
                                        </td>
                                    </tr>
                                     
                                    <tr style=" text-align: right;">
                                        <td></td>
                                    </tr>
                                     
                                    <tr>
                                        <td align="left"></td>
                                        <td colspan="3"></td>
                                    </tr>
                                     
                                    <tr>
                                        <td></td>
                                    </tr>
                                </table>
                                <p:dataTable style="font-size:11px; text-align: center" id="tablaES" var="concesion"
                                             rowKey="#{concesion.csiId}"
                                             value="#{mantenimientoconcesionMB.listaConcesiones}" rows="10"
                                             paginator="true" paginatorPosition="bottom"
                                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="5,10,15"    >
                             
                              <p:column headerText="contador"  >
                                        <h:outputText value="#{concesion.correla}"
                                                      style="width:300px;text-transform:uppercase;"/>
                                    </p:column>
                             
                                    <p:column headerText="Concesión" >
                                        <h:outputText value="#{concesion.csiNombre}"
                                                      style="width:300px;text-transform:uppercase;"/>
                                    </p:column>
                                    
                                    <p:column headerText="Tipo de Infraestructura">
                                        <h:outputText value="#{concesion.infraestructuraTipo.tinNombre}"
                                                      style="width:300px;text-transform:uppercase;"/>
                                    </p:column>
                                    <p:column headerText="Editar">
                                    
                                        <p:commandButton actionListener="#{mantenimientoconcesionMB.cargarEditar}"
                                                         oncomplete="editarPanel.show()" image="ui-icon-document"
                                                         style="width:25px;height:25px" update=":form:editarPanel">
                                            <f:param id="idModificar" name="idModificar" value="#{concesion.csiId}"/>
                                        
                                        </p:commandButton>
                                     
                                    </p:column>
                                  
                                    <p:column headerText="ELIMINAR">
                                       
                                        <p:commandButton actionListener="#{mantenimientoconcesionMB.cargarEliminarConcesion()}"
                                                         oncomplete="eliminarConcesionPanel.show()"
                                                         image="ui-icon-document" style="width:25px;height:25px"
                                                         update=":form:tablaES :form:eliminarConcesionPanel">
                                            <f:param id="idEliminarConcesion" name="idEliminarConcesion"
                                                     value="#{concesion.csiId}"/>
                                        </p:commandButton>
                                       
                                    </p:column>
                                </p:dataTable>
                            </div>
                        </center>
                    </p:layoutUnit>
                    <p:layoutUnit position="south" style="border:0px" resizable="true" closable="true"
                                  collapsible="true">
                        <div align="center" style="font-size: 10px;font-weight: bold;">PROYECTO OSITRAN
                                                                                       Ositran-Developer Por AsisTP-2015</div>
                    </p:layoutUnit>
                    
                </p:layout>
                
                
                <p:dialog header="ELIMINAR CONCESION" widgetVar="eliminarConcesionPanel"
                          id="eliminarConcesionPanel" modal="true" style="text-align:center;">
                    <table style="margin-bottom:5px;font-size:11px;text-align:center">
                        <tr>
                            <td align="left">DESEA ELIMINAR CONCESION:</td>
                            <td align="left">
                                <h:outputText value="#{mantenimientoconcesionMB.nombreConcesion}"
                                              style="align:left; text-align:left"></h:outputText>
                            </td>
                            <td align="left">
                                <h:inputHidden value="#{mantenimientoconcesionMB.codigoConcesion}"
                                               id="codigoConcesion"/>
                            </td>
                        </tr>
                    </table>
                    
                    <p:commandButton update=":form:tablaES" oncomplete="eliminarConcesionPanel.hide()"
                                                 actionListener="#{mantenimientoconcesionMB.eliminacionConfirmadaConcesion()}" style="width:70px"
                                                 value="#{btn.btn_eliminar}"/>
                    
                </p:dialog>
                
                
                
               
                <div style="width:60%">
                    <!--INICIO REGISTRAR CONCESION CON CLASE ConcesionVO y ConcesionVOO-->
                    <p:dialog id="insertarPanel" header="Registrar" widgetVar="insertarPanel" modal="true">
                        <table style="font-size: 11px">
                            <tr>
                                <td>
                                   
                                     
                                    <p:panel header="Mantenimiento de concesión" style="margin-bottom:20px;align:left">
                                        <h:panelGrid columns="2" cellpadding="5">
                                            <h:outputLabel value="Seleccionar Tipo de Infraestructura"
                                                           style="align:left; text-align:left"></h:outputLabel>
                                            <p:selectOneMenu value="#{mantenimientoconcesionMB.codigoTipoInfraestructuraInsert}"
                                                             style="width:300px;text-transform:uppercase;width:100% ">
                                                <f:selectItem itemValue="0" itemLabel="-Seleccionar-"/>
                                                <f:selectItems value="#{mantenimientoconcesionMB.listaInfraestructuraTipos}"
                                                               var="tip" itemLabel="#{tip.tinNombre}"
                                                               itemValue="#{tip.tinId}"/>
                                            </p:selectOneMenu>
                                            <h:outputLabel value="Nombre de la Concesión" style="text-align:left;"></h:outputLabel>
                                            <p:inputText value="#{mantenimientoconcesionMB.nombre}"
                                                         style="width:300px;text-transform:uppercase; "/>
                                            <h:outputLabel value="Infraestructura"></h:outputLabel>
                                            <p:inputText id="txt_title"
                                                         value="#{mantenimientoconcesionMB.infraestructura.infNombre}"
                                                         style="width:300px;text-transform:uppercase; "/>
                                            <p:commandButton id="btn_reset" value="Limpiar" type="reset"/>
                                            <p:commandButton id="btn_add" value="Agregar Infraestructura" update="books mensaje @parent"
                                                             action="#{mantenimientoconcesionMB.reinit()}">
                                                <p:collector value="#{mantenimientoconcesionMB.infraestructura}"
                                                             addTo="#{mantenimientoconcesionMB.infraestructuras}"
                                                             unique="true"/>
                                            </p:commandButton>
                                        </h:panelGrid>
                                    </p:panel>
                                     
                                    <p:outputPanel id="books">
                                        <p:dataTable value="#{mantenimientoconcesionMB.infraestructuras}" var="list"
                                                     id="booksTable">
                                            <p:column headerText="Title">
                                                <h:outputText value="#{list.infNombre}"
                                                              style="width:300px;text-transform:uppercase; "/>
                                            </p:column>
                                            <p:column headerText="Action">
                                                <p:commandLink value="Remove" update=":form:books"
                                                               process=":form:books">
                                                    <p:collector value="#{list}"
                                                                 removeFrom="#{mantenimientoconcesionMB.infraestructuras}"
                                                                 unique="true"/>
                                                </p:commandLink>
                                            </p:column>
                                        </p:dataTable>
                                    </p:outputPanel>
                                     
                                    <p:commandButton update=":form:tablaES :form:mensaje"
                                                     action="#{mantenimientoconcesionMB.guardar}" style="width:70px"
                                                     value="#{btn.btn_guardar}"/>
                                     
                                    <p:commandButton style="width:70px" value="Salir" onclick="insertarPanel.hide ()"/>
                                </td>
                            </tr>
                        </table>
                    </p:dialog>
                </div>
                <!--Mantenimiento de Infraestructuras-->
                <p:dialog header="Editar" widgetVar="editarPanel" id="editarPanel" modal="true"
                          style="text-align:center;">
                    <table style="margin-bottom:5px;font-size:11px;text-align:center">
                        <tr>
                            <td align="right">TIPO INFRAESTRUCTURA:</td>
                            <td align="left">
                                <p:selectOneMenu value="#{mantenimientoconcesionMB.codigoTipoInfraestructura}"
                                                 style="width:100%">
                                    <f:selectItem itemValue="0" itemLabel="-Seleccione-"/>
                                    <f:selectItems value="#{mantenimientoconcesionMB.listaInfraestructuraTipos}"
                                                   var="tip" itemValue="#{tip.tinId}" itemLabel="#{tip.tinNombre}"/>
                                </p:selectOneMenu>
                            </td>
                        </tr>
                         
                        <tr>
                            <td align="left">EDITAR NOMBRE</td>
                            <td align="left">
                                <p:inputText value="#{mantenimientoconcesionMB.nombreE}" style="width:300px"/>
                            </td>
                        </tr>
                         
                        <tr>
                            <td align="left">
                                <p:commandButton update=":form:tablaES" oncomplete="editarPanel.hide()"
                                                 action="#{mantenimientoconcesionMB.editar}" style="width:70px"
                                                 value="#{btn.btn_modificar}"/>
                            </td>
                            <td align="left">
                                <p:commandButton style="width:70px" value="Salir" onclick="editarPanel.hide ()"/>
                            </td>
                        </tr>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <tr>
                          <td align="left">
      <p:commandButton actionListener="#{mantenimientoconcesionMB.cargarActualizarInfraestructura(mantenimientoconcesionMB.codigoE,mantenimientoconcesionMB.nombreE)}"
        oncomplete="agregarInfraestructuraPanel.show()" image="ui-icon-document" style="width:25px;height:25px" update=":form:agregarInfraestructuraPanel">
        <f:param id="idConcesion" name="idConcesion" value="#{concesion.csiId}"/>
      </p:commandButton>
   </td></tr>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                    </table>
                    <!--Mantenimiento de Infraestructuras-->
                    <p:dataTable style="font-size:11px;" id="tablaES2" var="infraestructura"
                                 value="#{mantenimientoconcesionMB.listaInfraestructuras}">
                        <p:column headerText="ID">
                            <h:outputText value="#{infraestructura.infId}"/>
                        </p:column>
                        <p:column headerText="Infraestructura">
                            <h:outputText value="#{infraestructura.infNombre}"/>
                        </p:column>
                        <p:column headerText="ELIMINAR">
                            <p:commandButton actionListener="#{mantenimientoconcesionMB.cargarEliminarInfraestructura()}"
                                             oncomplete="eliminarInfraestructuraPanel.show()" image="ui-icon-document"
                                             style="width:25px;height:25px" update=":form:eliminarInfraestructuraPanel">
                                <f:param id="idEliminarInfraestructura" name="idEliminarInfraestructura"
                                         value="#{infraestructura.infId}"/>
                            </p:commandButton>
                        </p:column>
                    </p:dataTable>
                </p:dialog>
                <!--Mantenimiento de Infraestructuras-->
                <p:dialog header="ELIMINAR INFRAESTRUCTURA" widgetVar="eliminarInfraestructuraPanel"
                          id="eliminarInfraestructuraPanel" modal="true" style="text-align:center;">
                    <table style="margin-bottom:5px;font-size:11px;text-align:center">
                        <tr>
                            <td align="left">DESEA ELIMINAR INFRAESTRUCTURA:</td>
                            <td align="left">
                                <h:outputText value="#{mantenimientoconcesionMB.nombreInfraestructura}"
                                              style="align:left; text-align:left"></h:outputText>
                            </td>
                            <td align="left">
                                <h:inputHidden value="#{mantenimientoconcesionMB.codigoInfraestructura}"
                                               id="codEliminarInfraestructura"/>
                            </td>
                        </tr>
                    </table>
                    <p:commandButton update=":form:tablaES2" oncomplete="eliminarInfraestructuraPanel.hide()"
                                     actionListener="#{mantenimientoconcesionMB.eliminacionConfirmadaInfraestructura()}"
                                     style="width:70px" value="#{btn.btn_eliminar}"/>
                </p:dialog>
                
                
                
                
                
                
                
                
                
                
                
                
                
            <!--NUEVO CARRRO-->
                <p:dialog header="AGREGAR INFRAESTRUCTURA" widgetVar="agregarInfraestructuraPanel"
                          id="agregarInfraestructuraPanel" modal="true" style="text-align:center;">
                    
                    
                    
                    <table style="margin-bottom:5px;font-size:11px;text-align:center">
                       
                         
                        <tr>
                            <td align="left">NOMBRE DE LA CONCESION</td>
                            <td align="left">
                                <p:outputLabel value="#{mantenimientoconcesionMB.nombreConcesion}" style="width:300px"/>
                            </td>
                        </tr>
                         
                        <tr>
                          <td align="left">CODIGO DE LA CONCESION</td>
                            <td align="left">
                                <p:outputLabel value="#{mantenimientoconcesionMB.codigoConcesion}" style="width:300px"/>
                            </td>
                            
                            
                        </tr>
                    </table>
                    
 <p:inputText id="txt_title2" value="#{mantenimientoconcesionMB.infraestructura2.infNombre}" style="width:300px;text-transform:uppercase; "/>
     <p:commandButton id="btn_reset2" value="Limpiar" type="reset"/>
     <p:commandButton id="btn_add2" value="Agregar Infraestructura" update="bookss mensaje22 @parent" action="#{mantenimientoconcesionMB.reinit2()}" oncomplete="agregarInfraestructuraPanel.show()" >
     <p:collector value="#{mantenimientoconcesionMB.infraestructura2}" addTo="#{mantenimientoconcesionMB.infraestructuras2}" unique="true"/>
     </p:commandButton>

	 <p:outputPanel id="bookss">
     <p:growl id="mensaje22" life="5000" showDetail="true"/>
     <p:dataTable value="#{mantenimientoconcesionMB.infraestructuras2}" var="listt" id="booksTablee">
     <p:column headerText="Title">
     <h:outputText value="#{listt.infNombre}" style="width:300px;text-transform:uppercase; "/>
     </p:column>
     <p:column headerText="Action">
     <p:commandLink value="Remove" update=":form:bookss" process=":form:bookss">
     <p:collector value="#{listt}" removeFrom="#{mantenimientoconcesionMB.infraestructuras2}" unique="true"/>
     </p:commandLink>
     </p:column>
     </p:dataTable>
     <p:commandButton update=":form:tablaES :form:mensaje" action="#{mantenimientoconcesionMB.guardar2()}" style="width:70px" value="#{btn.btn_guardar}">
      <f:param id="id5" name="id5" value="#{mantenimientoconcesionMB.codigoConcesion}"/>
      </p:commandButton>
     <p:commandButton style="width:70px" value="Salir" />
     </p:outputPanel>
                        
                     
                        
                        
                        
                  
                    
                    <!--p:commandButton update=":form:tablaES2" oncomplete="eliminarInfraestructuraPanel.hide()"
                                     actionListener="#{mantenimientoconcesionMB.eliminacionConfirmadaInfraestructura()}"
                                     style="width:70px" value="#{btn.btn_eliminar}"/-->
                </p:dialog>    
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
            </h:form>
           
        </h:body>
    </html>
</f:view>



