<?xml version='1.0' encoding='windows-1252'?>
<!DOCTYPE html>
<f:view xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets">
    <html xmlns="http://www.w3.org/1999/xhtml" xmlns:p="http://primefaces.org/ui">
        <h:head>
            <style type="text/css">
                .ui-dialog-titlebar {
                    font-size: 11px;
                    font-family: sans-serif;
                }
            </style>
        </h:head>
        <h:body>
            <f:event listener="#{backing_ositran_parametros_mantenimientoconcesion.listarTipInfraestructura}"
                     type="postAddToView"></f:event>
             
            <f:event listener="#{backing_ositran_parametros_mantenimientoconcesion.ListarConcesiones}"
                     type="postAddToView"></f:event>
           
              
            <h:form id="form">
           <p:growl id="mensaje" life="5000" showDetail="true" />
                <p:layout fullPage="true" style="border:none">
                    <p:layoutUnit position="center" style="border:0px">
                        <ui:include src="/ositran/util/menu.xhtml"/>
                        <div align="center">
                            <h3 style="color:Black;font-weight:bold;font-family: sans-serif;">
                                Mantenimiento de Concesiones
                            </h3>
                        </div>
                        <center>
                            <div style="width:60%" >
                            <!---->
                            
                            <table style="margin-bottom:5px;font-size: 11px" >
                                    <tr>
                                        <td>
                                           <h:outputLabel value="Mantenimiento de Infraestructuras"
                                                       style="align:left; text-align:left"></h:outputLabel>
                                        </td>
                                        <td>
                                            <p:selectOneMenu id="tipobuscar" value="#{backing_ositran_parametros_mantenimientoconcesion.codigoTipoInfraestructurafiltro}"
                                                         style="width:70%">
                                            <f:selectItem itemValue="0" itemLabel="-Seleccione-" />
                                            <f:selectItems value="#{backing_ositran_parametros_mantenimientoconcesion.listaInfraestructuraTipos}"
                                                           var="tip" itemLabel="#{tip.tinNombre}"
                                                           itemValue="#{tip.tinId}"/>
                                        </p:selectOneMenu>
                                        </td>
                                        <td style=" text-align: right;">
                                            
                                        </td>
                                    </tr>
                                     
                                    <tr>
                                        <td>
                                            Nombre:
                                        </td>
                                        <td>
                                            <p:inputText id="nombrebuscar" value="#{backing_ositran_parametros_mantenimientoconcesion.concesionbuscar}"
                                                     style="width:300px"></p:inputText>
                                        </td>
                                       
                                        <td></td>
                                        <td>
                                        <p:commandButton  value="#{btn.btn_buscar}" action="#{backing_ositran_parametros_mantenimientoconcesion.buscarconcesion}" update=":form:tablaES"/>
                                            <p:commandButton value="#{btn.btn_limpiar}" onclick="limpiar()" />
                                        </td>
                                    </tr>
                                     
                                    <tr></tr>
                                     
                                    <tr>
                                        <td align="left"></td>
                                        <td colspan="3"></td>
                                    </tr>
                                    <tr>
                                    <td>
                                         
                                    </td>
                                    </tr>
                                </table>
                             
                                 
                                <p:dataTable style="font-size:11px;" id="tablaES" var="concesion"
                                             value="#{backing_ositran_parametros_mantenimientoconcesion.listaConcesiones}"
                                              rows="10"
                         paginator="true"
                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         rowsPerPageTemplate="5,10,15" 
                                             >
                                    <p:column headerText="ID">
                                        <h:outputText value="#{concesion.csiId}"/>
                                    </p:column>
                                    <p:column headerText="Nombre">
                                        <h:outputText value="#{concesion.csiNombre}"/>
                                    </p:column>
                                    <p:column headerText="Tipo de Infraestructura">
                                        <h:outputText value="#{concesion.infraestructuraTipo.tinNombre}"/>
                                    </p:column>
                                    <p:column headerText="Usuario Registro">
                                        <h:outputText value="#{concesion.csiUsuarioAlta}"/>
                                    </p:column>
                                    <p:column headerText="Creacion:">
                                        <h:outputText value="#{concesion.csiFechaAlta}"/>
                                    </p:column>
                                    <p:column headerText="Modificacion:">
                                        <h:outputText value="#{concesion.csiFechaCambio}"/>
                                    </p:column>
                                    <p:column headerText="Edi">
                                        <p:commandButton update=":form:editarPanel"
                                                         actionListener="#{backing_ositran_parametros_mantenimientoconcesion.cargarEditar(concesion)}"
                                                         oncomplete="editarPanel.show()" image="ui-icon-document"
                                                         style="width:25px;height:25px"/>
                                    </p:column>
                                    <p:column headerText="Eli">
                                        <p:commandButton update=":form:confirEliminar :form:codEliminar"
                                                         actionListener="#{backing_ositran_parametros_mantenimientoconcesion.cargarEliminar(concesion.csiId,concesion.csiNombre)}"
                                                         oncomplete="confirEliminar.show()" image="ui-icon-closethick"
                                                         style="width:25px;height:25px"/>
                                    </p:column>
                                   
                                </p:dataTable>
                                <table style=" text-align: center; margin-bottom:5px;font-size: 11px">
                                 <td>
                                 <p:commandButton onclick="insertarPanel.show()" value="Nueva Concesión"/>
                            </td>
                            </table>
                            </div>
                        </center>
                    </p:layoutUnit>
                    <p:layoutUnit position="south" style="border:0px" resizable="true" closable="true"
                                  collapsible="true">
                        <div align="center" style="font-size: 10px;font-weight: bold;">Proyecto Ositran-Developer Por
                                                                                       AsisTP-2015</div>
                    </p:layoutUnit>
                    <h:inputHidden value="#{backing_ositran_parametros_mantenimientoconcesion.codigoEliminar}"
                                   id="codEliminar"/>
                </p:layout>
                <p:dialog id="confirEliminar" widgetVar="confirEliminar" header="Confirmar" modal="true">
                    <table style="font-size: 11px">
                        <tr>
                            <td colspan="2">
                                Eliminar el tipo de concesion: " 
                                #{backing_ositran_parametros_mantenimientoconcesion.nombreEliminar}"
                            </td>
                        </tr>
                         
                        <tr>
                            <td align="right">
                                <p:commandButton update=":form:tablaES" value="Eliminar"
                                                 actionListener="#{backing_ositran_parametros_mantenimientoconcesion.eliminar}"
                                                 oncomplete="confirEliminar.hide()"></p:commandButton>
                            </td>
                            <td align="left">
                                <p:commandButton value="Cancelar" onclick="confirEliminar.hide()"></p:commandButton>
                            </td>
                        </tr>
                    </table>
                </p:dialog>
                <div style="width:60%" >
                <!--INICIO REGISTRAR CONCESION CON CLASE ConcesionVO y ConcesionVOO-->
                <p:dialog id="insertarPanel"  header="Registrar" widgetVar="insertarPanel" modal="true">
                    <table style="font-size: 11px">
                        <tr>
                            <td>
                                <p:growl id="msgs"/>
                                 
                                <p:panel header="Mantenimiento de concesión" style="margin-bottom:20px;align:left">
                                    <h:panelGrid columns="2" cellpadding="5">
                                        <h:outputLabel value="Seleccionar Tipo de Infraestructura"
                                                       style="align:left; text-align:left"></h:outputLabel>
                                        <p:selectOneMenu value="#{backing_ositran_parametros_mantenimientoconcesion.codigoTipoInfraestructuraInsert}"
                                                         style="width:100%">
                                            <f:selectItem  itemValue="0" itemLabel="-Seleccionar-" />
                                            <f:selectItems value="#{backing_ositran_parametros_mantenimientoconcesion.listaInfraestructuraTipos}"
                                                           var="tip" itemLabel="#{tip.tinNombre}"
                                                           itemValue="#{tip.tinId}"/>
                                                           
                                        </p:selectOneMenu>
                                        <h:outputLabel value="Nombre de la Concesión" style="text-align:left;"></h:outputLabel>
                                        <p:inputText value="#{backing_ositran_parametros_mantenimientoconcesion.nombre}"
                                                     style="width:300px"/>
                                        <h:outputLabel value="Infraestructura"></h:outputLabel>
                                        <p:inputText id="txt_title"
                                                     value="#{backing_ositran_parametros_mantenimientoconcesion.infraestructura.infNombre}"/>
                                        <p:commandButton id="btn_reset" value="Reset" type="reset"/>
                                        <p:commandButton id="btn_add" value="Add" update="books msgs @parent"
                                                         action="#{backing_ositran_parametros_mantenimientoconcesion.reinit()}">
                                            <p:collector value="#{backing_ositran_parametros_mantenimientoconcesion.infraestructura}"
                                                         addTo="#{backing_ositran_parametros_mantenimientoconcesion.infraestructuras}"
                                                         unique="true"/>
                                        </p:commandButton>
                                    </h:panelGrid>
                                </p:panel>
                                 
                                <p:outputPanel id="books">
                                    <p:dataTable value="#{backing_ositran_parametros_mantenimientoconcesion.infraestructuras}"
                                                 var="list" id="booksTable">
                                        <p:column headerText="Title">
                                            <h:outputText value="#{list.infNombre}"/>
                                        </p:column>
                                        <p:column headerText="Action">
                                            <p:commandLink value="Remove" update=":form:books" process=":form:books">
                                                <p:collector value="#{list}"
                                                             removeFrom="#{backing_ositran_parametros_mantenimientoconcesion.infraestructuras}"
                                                             unique="true"/>
                                            </p:commandLink>
                                        </p:column>
                                    </p:dataTable>
                                </p:outputPanel>
                                 
                                <p:commandButton update=":form:tablaES :form:mensaje" oncomplete="insertarPanel.hide()"
                                                 action="#{backing_ositran_parametros_mantenimientoconcesion.guardar}"
                                                 style="width:70px" value="#{btn.btn_guardar}"/>
                                 
                                <p:commandButton style="width:70px" value="Salir" onclick="insertarPanel.hide ()"/>
                            </td>
                        </tr>
                    </table>
                </p:dialog>
                </div>
               
                <!--Mantenimiento de Infraestructuras-->  
                <p:dialog header="Editar" widgetVar="editarPanel" id="editarPanel" modal="true"
                          style="text-align:center;">
                    <table style="margin-bottom:5px;font-size:11px;text-align:center">
                        <tr>
                            <td align="right">Tipo Infraestructura:</td>
                            <td align="left">
                               <p:selectOneMenu value="#{backing_ositran_parametros_mantenimientoconcesion.codigoTipoInfraestructura}"
                                                         style="width:100%">
                                             <f:selectItem  itemValue="0" itemLabel="-Seleccione-"/>            
                                            <f:selectItems value="#{backing_ositran_parametros_mantenimientoconcesion.listaInfraestructuraTipos}"
                                                           var="tip" itemLabel="#{tip.tinNombre}"
                                                           itemValue="#{tip.tinId}"/>
                                        </p:selectOneMenu>
                            </td>
                        </tr>
                         
                        <tr>
                            <td align="left">
                                Editar Nombre
                            </td>
                            <td align="left">
                                <p:inputText value="#{backing_ositran_parametros_mantenimientoconcesion.nombreE}"
                                             style="width:300px"/>
                            </td>
                        </tr>
                         
                        <tr>
                            <td align="left">
                                <p:commandButton update=":form:tablaES" oncomplete="editarPanel.hide()"
                                                 action="#{backing_ositran_parametros_mantenimientoconcesion.editar}"
                                                 style="width:70px" value="#{btn.btn_modificar}"/>
                            </td>
                            <td align="left">
                                <p:commandButton style="width:70px" value="Salir" onclick="editarPanel.hide ()"/>
                            </td>
                        </tr>
                    </table>
                    
                    
                 <!--Mantenimiento de Infraestructuras-->   
                     <p:dataTable style="font-size:11px;" id="tablaES2" var="infraestructura"
                                             value="#{backing_ositran_parametros_mantenimientoconcesion.listaInfraestructuras}">
                                     
                                        <p:column headerText="ID">
                                        <h:outputText value="#{infraestructura.infId}"/>
                                    </p:column>
                                    <p:column headerText="ID">
                                        <h:outputText value="#{infraestructura.infNombre}"/>
                                    </p:column>
                                    <p:column headerText="ID">
                                        <h:outputText value="#{infraestructura.concesion.csiId}"/>
                                    </p:column>
                                
                                    <p:column headerText="Eli">
                                        <p:commandButton update=":form:confirEliminar :form:codEliminar"
                                                         actionListener="#{backing_ositran_parametros_mantenimientoconcesion.cargarEliminar(concesion.csiId,concesion.csiNombre)}"
                                                         oncomplete="confirEliminar.show()" image="ui-icon-closethick"
                                                         style="width:25px;height:25px"/>
                                    </p:column>
                                   
                                </p:dataTable>
                    
                    
                    
                </p:dialog>
            </h:form>
            <script>
                function limpiar(){
                    document.getElementById("nombrebuscar").value="";
                   
                    
                    
                }

            </script>
        </h:body>
    </html>
</f:view>



