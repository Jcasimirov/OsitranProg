<?xml version='1.0' encoding='windows-1252'?>
<!DOCTYPE html>
<f:view xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets">
    <html xmlns="http://www.w3.org/1999/xhtml" xmlns:p="http://primefaces.org/ui">
        <h:head>
            <link href="#{request.contextPath}/css/style.css" rel="stylesheet" type="text/css"/>
            <link rel="icon" href="#{request.contextPath}#{paramInicio.icono}" type="#{paramInicio.tipo_mime_icono}"/>
            <script src="../../js/validaciones.js" type="text/javascript"></script>
        </h:head>
        <h:body>
            <f:event listener="#{declararInversionMB.validarSesion}" type="preRenderComponent"/>
             
            <f:event listener="#{declararInversionMB.listarTiposMoneda}" type="preRenderComponent"/>
             
            <f:event listener="#{declararInversionMB.listarTiposdeInfraestructura}" type="preRenderComponent"/>
             
            <f:event listener="#{declararInversionMB.filtrarConcesion}" type="preRenderComponent"/>
             
            <f:event listener="#{declararInversionMB.listaPeriodos}" type="preRenderComponent"/>
             
            <f:event listener="#{declararInversionMB.listarTipoInversion}" type="preRenderComponent"/>
             
            <p:layout fullPage="true" style="border:none">
                <p:layoutUnit position="center" style="border:0px">
                    <ui:include src="/ositran/util/menuOpciones.xhtml"/>
                    <p:dialog widgetVar="_dlgEditarReconocimiento" header="Editar Montos en Reconocimiento" modal="true"
                              resizable="false" appendToBody="true" closable="true">
                        <h:form id="frmEditarMontoRec">
                            <p:panelGrid styleClass="pnlEdicion" columnClasses="etiquetas,cajas" columns="2">
                                <h:outputText value="Monto Presentado"/>
                                <p:inputText value="#{declararInversionMB.invReconocimientoVO.ivrMontoPresentado}"
                                             readonly="true"/>
                                <h:outputText value="Monto Aprobado"/>
                                <p:inputText value="#{declararInversionMB.invReconocimientoVO.ivrMontoAprobado}"
                                             onkeypress="return ValidarNumFloat(event,this);"/>
                                <p:commandButton value="#{btn.btn_aceptar}"
                                                 actionListener="#{declararInversionMB.grabarReconocimiento}">
                                    <f:attribute name="reconocimiento"
                                                 value="#{declararInversionMB.invReconocimientoVO}"/>
                                </p:commandButton>
                                <p:commandButton value="#{btn.btn_salir}" onclick="_dlgEditarReconocimiento.hide();"></p:commandButton>
                            </p:panelGrid>
                        </h:form>
                    </p:dialog>
                    <p:dialog widgetVar="_dlgEditarReajuste" header="Editar Montos en Reajuste" modal="true"
                              resizable="false" appendToBody="true" closable="true">
                        <h:form id="frmEditarMontoRea">
                            <p:panelGrid styleClass="pnlEdicion" columnClasses="etiquetas,cajas" columns="2">
                                <h:outputText value="Monto Aprobado"/>
                                <p:inputText value="#{declararInversionMB.invReajusteVO.irjMontoAprobado}"
                                             readonly="true"/>
                                <h:outputText value="Monto Reajustado"/>
                                <p:inputText value="#{declararInversionMB.invReajusteVO.irjMontoReajuste}"
                                             onkeypress="return ValidarNumFloat(event,this);"/>
                                <p:commandButton value="#{btn.btn_aceptar}"
                                                 actionListener="#{declararInversionMB.grabarReajuste}">
                                    <f:attribute name="reajuste" value="#{declararInversionMB.invReajusteVO}"/>
                                </p:commandButton>
                                <p:commandButton value="#{btn.btn_salir}" onclick="_dlgEditarReajuste.hide();"></p:commandButton>
                            </p:panelGrid>
                        </h:form>
                    </p:dialog>
                    <h:form id="form" rendered="#{declararInversionMB.rolOpcion.troConsultar eq 1}">
                        <p:growl id="mensaje" showDetail="true" life="10000"/>
                        <div align="center">
                            <div align="center">
                                <h5>DECLARAR INVERSI&#211;N</h5>
                            </div>
                            <table style="font-size: 11px;">
                                <tr>
                                    <td valign="top">
                                        <p:fieldset legend="Datos Contrato Concesión" >
                                            <p:fieldset id="fsCriterioBusqueda" legend="Critério de Búsqueda">
                                                <p:inputText id="cb"
                                                             style="width:200px;position:relative;float:left;text-transform:uppercase"
                                                             value="#{declararInversionMB.nombreConcesion}"
                                                             onkeyup="pasarMayuscula(this.value,this.id)"/>
                                                <p:watermark for="cb" value="Buscar Contrato Concesión"/>
                                                <p:commandButton icon="ui-icon-search"
                                                                 style="position:relative;float:left;"
                                                                 actionListener="#{declararInversionMB.abrirBuscarContratos()}"
                                                                 oncomplete="popupBuscarContrato.show();"/>
                                            </p:fieldset>
                                            <br></br>
                                            <p:fieldset id="datosConcesion" legend="Datos Concesión">
                                                <table>
                                                    <tr>
                                                        <td align="left">Concesi&#243;n</td>
                                                        <td>
                                                            <p:inputText value="#{declararInversionMB.contratoVO.nombreConcesion}"
                                                                         readonly="true" style="width:260px"></p:inputText>
                                                        </td>
                                                    </tr>
                                                     
                                                    <tr>
                                                        <td align="left">Tipo Infraestructura</td>
                                                        <td>
                                                            <p:inputText value="#{declararInversionMB.contratoVO.nombreTipoInfraestructura}"
                                                                         readonly="true" style="width:200px"></p:inputText>
                                                        </td>
                                                    </tr>
                                                     
                                                    <tr>
                                                        <td align="left">Modalidad Concesi&#243;n</td>
                                                        <td>
                                                            <p:inputText value="#{declararInversionMB.contratoVO.nombreModalidad}"
                                                                         style="width:200px" readonly="true"></p:inputText>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </p:fieldset>
                                            <p:fieldset id="datosCompromiso" legend="ETAPA DE CONCESIÓN">
                                                <table>
                                                    <tr>
                                                        <td colspan="1" align="left">
                                                            #{cam.setapa}
                                                        </td>
                                                        <td colspan="3" align="left">
                                                            <p:selectOneMenu id="compromiso"
                                                                             value="#{declararInversionMB.contratoCompromisoId}">
                                                                <f:selectItem itemLabel="-Selecione-" itemValue="0"/>
                                                                <f:selectItems value="#{declararInversionMB.listaContratoCompromiso}"
                                                                               var="tip2" itemLabel="#{tip2.ccoPeriodo}"
                                                                               itemValue="#{tip2.ccoId}"/>
                                                                <p:ajax update=":form:tablaAvanceInversion 
                                                                        :form:plazoDeclaracion :form:totalcompromiso 
                                                                        :form:monedacompromiso"
                                                                        listener="#{declararInversionMB.cargarDatosCompromiso()}"/>
                                                            </p:selectOneMenu>
                                                        </td>
                                                    </tr>
                                                     
                                                    <tr>
                                                        <td align="left">Plazo:</td>
                                                        <td align="left" colspan="3">
                                                            <p:inputText id="plazoDeclaracion"
                                                                         value="#{declararInversionMB.contratoCompromisoVO.ccoPlazo}"
                                                                         style="text-align:right; width: 40px"
                                                                         readonly="true" size="10"/>
                                                             D&#237;a(s)
                                                        </td>
                                                    </tr>
                                                     
                                                    <tr>
                                                        <td align="left">Total:</td>
                                                        <td align="left">
                                                            <p:inputText id="totalcompromiso"
                                                                         value="#{declararInversionMB.contratoCompromisoVO.ccoTotal}"
                                                                         style="text-align:right; " readonly="true"
                                                                         size="10"></p:inputText>
                                                        </td>
                                                        <td align="left">
                                                            #{cam.mon}
                                                        </td>
                                                        <td align="left">
                                                            <p:inputText id="monedacompromiso"
                                                                         value="#{declararInversionMB.contratoCompromisoVO.monNombre}"
                                                                         readonly="true" size="10"></p:inputText>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </p:fieldset>
                                            <br></br>
                                            <p:fieldset id="datosExpe" legend="EXPEDIENTE DE  RECONOCIMIENTO">
                                                <p:dataTable paginatorPosition="bottom"
                                                             emptyMessage="NO SE ENCONTRARON DATOS" rows="10"
                                                             paginator="true"
                                                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                             rowsPerPageTemplate="5,10,20" resizableColumns="true"
                                                             style="font-size:11px; width:500px !important;"
                                                             id="tablaAvanceInversion"
                                                             value="#{declararInversionMB.listaInvAvnVO}"
                                                             var="tInversion" selectionMode="single"
                                                             rowKey="#{tInversion.tiaNumero}">
                                                    <p:ajax event="rowSelect"
                                                            listener="#{declararInversionMB.cargarDetalleInversion}"
                                                            update=":form:tablaReconocimiento :form:tablaReajuste :form"/>
                                                    <p:ajax event="rowUnselect"
                                                            listener="#{declararInversionMB.limpiarDatos()}"
                                                            update=":form:tablaReconocimiento"/>
                                                    <p:column headerText="Nro. Val">
                                                        <h:outputText value="#{tInversion.tiaNumero}"/>
                                                    </p:column>
                                                    <p:column headerText="Fcha de Reg." style="width:16%">
                                                        <h:outputText value="#{tInversion.tiaFechaRegistroDescripcion}"/>
                                                    </p:column>
                                                    <p:column headerText="Moneda" style="width:16%">
                                                        <h:outputText value="#{tInversion.nombreMoneda}"/>
                                                    </p:column>
                                                    <p:column headerText="Total" style="text-align:right;">
                                                        <h:outputText value="#{tInversion.tiaMontoTotalPresentado}"/>
                                                    </p:column>
                                                    <p:column headerText="Estado" style="width:20%">
                                                        <h:outputText value="#{tInversion.iaeNombreEstado}"/>
                                                    </p:column>
                                                </p:dataTable>
                                            </p:fieldset>
                                        </p:fieldset>
                                    </td>
                                    <td valign="top">
                                        <p:fieldset legend="Datos de Reconocimiento" id="datosDeclaracion"
                                                    rendered="#{declararInversionMB.mostrarxDeclaracionCargada}">
                                            <table >
                                                <tr>
                                                    <td align="left">Estado del Reconomiento:</td>
                                                    <td align="left">
                                                        <p:selectOneMenu widgetVar="estRecon" id="estRec"
                                                                         value="#{declararInversionMB.invVO.invEstadoReconocimiento}"
                                                                         style="width:210px">
                                                            <p:ajax listener="#{declararInversionMB.prepararMontosObservados()}"
                                                                    update=":form:tablaReconocimiento 
                                                                                                                                                      :form:tablaReajuste
                                                                                                                                                      :form:resumenMonPre
                                                                                                                                                      :form:resumenMonRea
                                                                                                                                                      :form:igvResumen"/>
                                                            <f:selectItem itemLabel="-Seleccionar-" itemValue="0"/>
                                                            <f:selectItem itemLabel="APROBADO" itemValue="1"/>
                                                            <f:selectItem itemLabel="OBSERVADO" itemValue="2"/>
                                                        </p:selectOneMenu>
                                                    </td>
                                                </tr>
                                                 
                                                <tr>
                                                    <td align="left">Observaci&#243;n:</td>
                                                    <td align="left">
                                                        <p:inputTextarea id="obsRecf"
                                                                         style="width:400px;text-transform:uppercase"
                                                                         onkeyup="pasarMayuscula(this.value,this.id)"
                                                                         value="#{declararInversionMB.invAvnVO.tiaObservaciones}"/>
                                                    </td>
                                                </tr>
                                            </table>
                                            <br></br>
                                            <p:fieldset id="datosReconoc" legend="RESULTADO DE RECONOCIMIENTO" styleClass="fieldContainer">
                                                <p:dataTable paginatorPosition="bottom"
                                                             emptyMessage="NO SE ENCONTRARON DATOS" rows="10"
                                                             paginator="true"
                                                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                             rowsPerPageTemplate="5,10,20" resizableColumns="true"
                                                              id="tablaReconocimiento"
                                                             value="#{declararInversionMB.listaInvReconocimientoVO}"
                                                             var="tReconocimiento">
                                                    <p:column headerText="Nro Val" styleClass="tabla-wrap-codigo">
                                                        <h:outputText value="#{tReconocimiento.tiaNumero}"/>
                                                    </p:column>
                                                    <p:column headerText="Inversión" styleClass="tabla-wrap-desc">
                                                        <h:outputText value="#{tReconocimiento.nombreInversion}"/>
                                                    </p:column>
                                                    <p:column headerText="Aeropuerto" styleClass="tabla-wrap-desc"
                                                              rendered="#{declararInversionMB.tipoInfraestructura eq paramInicio.tipinfaeropuertos}">
                                                        <h:outputText value="#{tReconocimiento.nombreInfraestructura}"/>
                                                    </p:column>
                                                    <p:column headerText="Descripcion del Concepto" styleClass="tabla-wrap-desc">
                                                        <h:outputText value="#{tReconocimiento.desConcepto}"/>
                                                    </p:column>
                                                    <p:column headerText="Moneda" styleClass="tabla-wrap-moneda">
                                                        <h:outputText value="#{tReconocimiento.nombreMoneda}"/>
                                                    </p:column>
                                                    <p:column headerText="Monto Presentado" styleClass="tabla-wrap-montos">
                                                        <h:outputText value="#{tReconocimiento.ivrMontoPresentado}"/>
                                                    </p:column>
                                                    <p:column headerText="Monto Aprobado" styleClass="tabla-wrap-montos">
                                                        <h:outputText value="#{tReconocimiento.ivrMontoAprobado}"/>
                                                    </p:column>
                                                    <p:column  styleClass="tabla-wrap-boton">
                                                        <p:commandButton icon="ui-icon-pencil"
                                                                         actionListener="#{declararInversionMB.editarReconocimiento}"
                                                                         update=":frmEditarMontoRec"
                                                                         oncomplete="_dlgEditarReconocimiento.show();"
                                                                         disabled="#{declararInversionMB.invVO.invEstadoReconocimiento eq 2}">
                                                            <f:attribute name="reconocimiento"
                                                                         value="#{tReconocimiento}"/>
                                                        </p:commandButton>
                                                    </p:column>
                                                    <p:columnGroup type="footer">
                                                        <p:row>
                                                            <p:column colspan="#{rectificarInversion.tipoInfraestructura eq paramInicio.tipinfaeropuertos ? 6 : 5}"
                                                                      footerText="Total" style="text-align:right;"></p:column>
                                                            <p:column footerText="#{declararInversionMB.totalMontoPresentado}"
                                                                      style="text-align:left;"></p:column>
                                                            <p:column footerText="#{declararInversionMB.totalMontoAprobado}"
                                                                      style="text-align:left;"></p:column>
                                                            <p:column/>
                                                        </p:row>
                                                    </p:columnGroup>
                                                </p:dataTable>
                                            </p:fieldset>
                                            <br></br>
                                            <p:fieldset id="datosReajuste" legend="REAJUSTE" styleClass="fieldContainer">
                                                <p:dataTable paginatorPosition="bottom"
                                                             emptyMessage="NO SE ENCONTRARON DATOS" rows="10"
                                                             paginator="true"
                                                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                             rowsPerPageTemplate="5,10,20" resizableColumns="true"
                                                              id="tablaReajuste"
                                                             value="#{declararInversionMB.listaInvReajusteVO}"
                                                             var="tReajuste">
                                                    <p:column headerText="Nro Val" styleClass="tabla-wrap-codigo">
                                                        <h:outputText value="#{tReajuste.tiaNumero}"/>
                                                    </p:column>
                                                    <p:column headerText="Inversión" styleClass="tabla-wrap-desc">
                                                        <h:outputText value="#{tReajuste.nombreInversion}"/>
                                                    </p:column>
                                                    <p:column headerText="Aeropuerto" styleClass="tabla-wrap-desc"
                                                              rendered="#{declararInversionMB.tipoInfraestructura eq paramInicio.tipinfaeropuertos}">
                                                        <h:outputText value="#{tReajuste.nombreInfraestructura}"/>
                                                    </p:column>
                                                    <p:column headerText="Descripcion del Concepto" styleClass="tabla-wrap-desc">
                                                        <h:outputText value="#{tReajuste.desConcepto}"/>
                                                    </p:column>
                                                    <p:column headerText="Moneda" styleClass="tabla-wrap-moneda">
                                                        <h:outputText value="#{tReajuste.nombreMoneda}"/>
                                                    </p:column>
                                                    <p:column headerText="Monto Aprobado" styleClass="tabla-wrap-montos">
                                                        <h:outputText value="#{tReajuste.irjMontoAprobado}"/>
                                                    </p:column>
                                                    <p:column headerText="Reajuste" styleClass="tabla-wrap-montos">
                                                        <h:outputText value="#{tReajuste.irjMontoReajuste}"/>
                                                    </p:column>
                                                    <p:column styleClass="tabla-wrap-boton">
                                                    <center>
                                                        <p:commandButton icon="ui-icon-pencil"
                                                                         rendered="#{tReajuste.irjMontoAprobado ne null}"
                                                                         actionListener="#{declararInversionMB.editarReajuste}"
                                                                         update=":frmEditarMontoRea"
                                                                         oncomplete="_dlgEditarReajuste.show();"
                                                                         disabled="#{declararInversionMB.invVO.invEstadoReconocimiento eq 2}">
                                                            <f:attribute name="reajuste" value="#{tReajuste}"/>
                                                        </p:commandButton>
                                                        </center>
                                                    </p:column>
                                                    <p:columnGroup type="footer">
                                                        <p:row>
                                                            <p:column colspan="#{rectificarInversion.tipoInfraestructura eq paramInicio.tipinfaeropuertos ? 6 : 5}"
                                                                      footerText="Total" style="text-align:right;"></p:column>
                                                            <p:column footerText="#{declararInversionMB.totalMontoAprobado}"
                                                                      style="text-align:left;"></p:column>
                                                            <p:column footerText="#{declararInversionMB.totalMontoReajustado}"
                                                                      style="text-align:left;"></p:column>
                                                            <p:column/>
                                                        </p:row>
                                                    </p:columnGroup>
                                                </p:dataTable>
                                            </p:fieldset>
                                            <br></br>
                                            <p:fieldset id="datosResumen" legend="RESUMEN">
                                                <table>
                                                    <tr>
                                                        <td>Monto Total Aprobado</td>
                                                        <td>
                                                            <p:inputText value="#{declararInversionMB.totalivrMontoAprobadoI}"
                                                                         size="10" 
                                                                         
                                                                         id="resumenMonPre" style="text-align:right"></p:inputText>
                                                        </td>
                                                        <td>Monto Total con Reajuste</td>
                                                        <td>
                                                            <p:inputText value="#{declararInversionMB.totalirjMontoReajusteI}"
                                                                         size="10" 
                                                                         
                                                                         id="resumenMonRea" style="text-align:right"></p:inputText>
                                                        </td>
                                                        <td>Montos con IGV?</td>
                                                        <td>
                                                            <p:selectBooleanCheckbox id="igvResumen"
                                                                                     value="#{declararInversionMB.renderMostrarIGV}"
                                                                                     disabled="#{declararInversionMB.invVO.invEstadoReconocimiento eq 2}">
                                                                <p:ajax listener="#{declararInversionMB.resetIGV()}"
                                                                        update=":form:datosResumen"/>
                                                            </p:selectBooleanCheckbox>
                                                        </td>
                                                        <td>
                                                            <h:outputText value="IGV"
                                                                          rendered="#{declararInversionMB.renderMostrarIGV}"/>
                                                        </td>
                                                        <td>
                                                            <p:inputMask id="igv" value="#{declararInversionMB.igv}"
                                                                         mask="0.99" size="3"
                                                                         rendered="#{declararInversionMB.renderMostrarIGV}"
                                                                         disabled="#{declararInversionMB.invVO.invEstadoReconocimiento eq 2}"></p:inputMask>
                                                             
                                                            <p:commandButton id="dd" icon="ui-icon-refresh"
                                                                             actionListener="#{declararInversionMB.calularMontosconIGV()}"
                                                                             update=":form:tablaReconocimiento :form:tablaReajuste :form:datosResumen"
                                                                             rendered="#{declararInversionMB.renderMostrarIGV}"
                                                                             disabled="#{declararInversionMB.invVO.invEstadoReconocimiento eq 2}"/>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </p:fieldset>
                                            <table>
                                                <tr>
                                                    <td align="left">N&#250;mero de Informe</td>
                                                    <td align="left">
                                                        <p:inputText value="#{declararInversionMB.invVO.invNumeroInforme}"
                                                                     size="10"
                                                                     onkeyup="pasarMayuscula(this.value,this.id);"></p:inputText>
                                                         
                                                        <h:outputText style="color:red;" value="*"/>
                                                    </td>
                                                    <td align="left">Fecha de Emisi&#243;n</td>
                                                    <td align="left">
                                                        <p:calendar size="10"
                                                                    maxdate="#{declararInversionMB.fechaactual}"
                                                                    value="#{declararInversionMB.invVO.invFechaEmisionInforme}"
                                                                    locale="es" pattern="dd/MM/yyyy"
                                                                    onkeypress="return validarCalendario(event);"/>
                                                         
                                                        <h:outputText style="color:red;" value="*"/>
                                                    </td>
                                                    <td align="left">Reg. de Salida</td>
                                                    <td align="left">
                                                        <p:inputText value="#{declararInversionMB.invVO.invRegSalidaInforme}"
                                                                     size="10"
                                                                     onkeyup="pasarMayuscula(this.value,this.id);"></p:inputText>
                                                         
                                                        <h:outputText style="color:red;" value="*"/>
                                                    </td>
                                                </tr>
                                                 
                                                <tr>
                                                    <td align="left">N&#250;mero de Oficio</td>
                                                    <td align="left">
                                                        <p:inputText value="#{declararInversionMB.invVO.invNumeroOficio}"
                                                                     size="10"
                                                                     onkeyup="pasarMayuscula(this.value,this.id);"></p:inputText>
                                                         
                                                        <h:outputText style="color:red;" value="*"/>
                                                    </td>
                                                    <td align="left">Fecha de Emisi&#243;n</td>
                                                    <td align="left">
                                                        <p:calendar size="10"
                                                                    maxdate="#{declararInversionMB.fechaactual}"
                                                                    value="#{declararInversionMB.invVO.invFechaEmisionOficio}"
                                                                    locale="es" pattern="dd/MM/yyyy"
                                                                    onkeypress="return validarCalendario(event);"/>
                                                         
                                                        <h:outputText style="color:red;" value="*"/>
                                                    </td>
                                                    <td align="left">Reg. de Salida</td>
                                                    <td align="left">
                                                        <p:inputText value="#{declararInversionMB.invVO.invRegSalidaOficio}"
                                                                     size="10"
                                                                     onkeyup="pasarMayuscula(this.value,this.id);"></p:inputText>
                                                         
                                                        <h:outputText style="color:red;" value="*"/>
                                                    </td>
                                                </tr>
                                                 
                                                <tr>
                                                    <td align="left">Nota Tipo de Cambio</td>
                                                    <td align="left">
                                                        <p:inputText id="tipoCambio"
                                                                     value="#{declararInversionMB.invVO.invNotaTipoCambio}"
                                                                     disabled="#{declararInversionMB.invAvnVO.monId eq 2}"
                                                                     onkeyup="pasarMayuscula(this.value,this.id);"></p:inputText>
                                                         
                                                        <h:outputText style="color:red;" value="*"
                                                                      rendered="#{declararInversionMB.invAvnVO.monId eq 1}"/>
                                                    </td>
                                                    <td align="left">Monto Tipo de Cambio</td>
                                                    <td align="left">
                                                        <p:inputMask id="montodeclaracion"
                                                                     value="#{declararInversionMB.invVO.invMontoTipoCambio}"
                                                                     onkeypress="return ValidarNumFloat(event,this);"
                                                                     mask="9.99" size="10" maxlength="4"
                                                                     disabled="#{declararInversionMB.invAvnVO.monId eq 2}"/>
                                                         
                                                        <h:outputText style="color:red;" value="*"
                                                                      rendered="#{declararInversionMB.invAvnVO.monId eq 1}"/>
                                                    </td>
                                                </tr>
                                                 
                                                <tr>
                                                    <td align="left">Nota</td>
                                                    <td colspan="3" align="left">
                                                        <p:inputTextarea id="nota" style="width:400px;"
                                                                         value="#{declararInversionMB.invVO.invNota}"
                                                                         onkeyup="pasarMayuscula(this.value,this.id);"/>
                                                         
                                                        <h:outputText style="color:red;" value="*"/>
                                                    </td>
                                                </tr>
                                                 
                                                <tr>
                                                    <td colspan="9">
                                                        <h:outputText value="Campos obligatorios (*)"
                                                                      style="margin:0px;color:red;font-weight:bold;"/>
                                                    </td>
                                                </tr>
                                            </table>
                                        </p:fieldset>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div style="text-align:center;font-size: 11px">
                            <p:commandButton style="width:80px" value="Guardar"
                                             actionListener="#{declararInversionMB.guardarDeclaracion()}"
                                             update=":form:tablaAvanceInversion :form:datosDeclaracion :form:mensaje"
                                             disabled="#{declararInversionMB.deshabilitadoxDeclaracionNoCargada}" 
                                             rendered="#{declararInversionMB.rolOpcion.troAgregar eq 1}"/>
                             
                            <p:commandButton style="width:80px" value="Limpiar"
                                             actionListener="#{declararInversionMB.limpiarTodo()}" update=":form"
                                             />
                        </div>
                    </h:form>
                </p:layoutUnit>
                <p:layoutUnit position="south" style="border:0px;width:98%" resizable="false" closable="false"
                              collapsible="false">
                    <div class="piePagina">
                        #{msg.titulo_PIE_PAGINA}
                    </div>
                </p:layoutUnit>
            </p:layout>
             
            <p:dialog id="dlgcon" widgetVar="popupBuscarContrato" header="Buscar Contrato" modal="true"
                      resizable="false" appendToBody="true" closable="true" width="1200" height="500"
                      styleClass="dlgContent">
                <h:form id="frmBuscarContratoDlg">
                    <p:panelGrid id="pnlBuscarContratoDlg" styleClass="pnlEdicion" columns="3"
                                 columnClasses="etiquetas,cajas,validadores" style="width:100%;">
                        <p:outputLabel for="concesion" value="#{cam.concesion}"/>
                        <p:selectOneMenu widgetVar="_cboconcesion" id="concesion"
                                         value="#{declararInversionMB.concesion}" style="width:280px;">
                            <f:selectItem itemLabel="-Seleccionar-" itemValue="0"/>
                            <f:selectItems value="#{declararInversionMB.listaConcesiones}" var="lisConcesion"
                                           itemLabel="#{lisConcesion.csiNombre}" itemValue="#{lisConcesion.csiId}"/>
                        </p:selectOneMenu>
                        <p:message for="concesion" display="icon"/>
                        <p:outputLabel for="fechaInicioBC" value="Fecha Inicio"/>
                        <p:calendar id="fechaInicioBC" widgetVar="_fechaInicioBC" onkeypress="return validarCalendario(event);"
                                    value="#{declararInversionMB.fechaInicioSuscripcion}" locale="es"
                                    pattern="dd/MM/yyyy" style="float:left;position:relative;"  maxdate="#{declararInversionMB.fechaactual}"/>
                        <p:message for="fechaInicioBC" display="icon"/>
                        <p:outputLabel for="fechaFinBC" value="Fecha Fin"/>
                        <p:calendar id="fechaFinBC" widgetVar="_fechaFinBC" onkeypress="return validarCalendario(event);" maxdate="#{declararInversionMB.fechaactual}"
                                    value="#{declararInversionMB.fechaFinSuscripcion}" locale="es" pattern="dd/MM/yyyy"
                                    style="float:left;position:relative;"  />
                        <p:message for="fechaFinBC" display="icon"/>
                    </p:panelGrid>
                    <p:panelGrid id="pnlBuscarContratoBtnDlg" styleClass="pnlEdicion" columns="1" style="width:100%;">
                        <p:panelGrid columns="2">
                            <p:commandButton value="Buscar Contrato"
                                             actionListener="#{declararInversionMB.buscarContratos()}"
                                             update="contrato"/>
                            <p:commandButton value="Limpiar"
                                             onclick="_fechaInicioBC.setDate(null);_fechaFinBC.setDate(null);_cboconcesion.selectValue(0);"
                                             update=":frmBuscarContratoDlg:concesion"/>
                        </p:panelGrid>
                        <p:dataTable value="#{declararInversionMB.listaContrato}" id="contrato" var="contrato11"
                                     rowsPerPageTemplate="5,10,20" emptyMessage="NO SE ENCONTRARON DATOS">
                            <p:column headerText="Fecha Suscripción">
                                <h:outputText value="#{contrato11.conFechaSuscripcionDescripcion}"/>
                            </p:column>
                            <p:column headerText="Tipo de Infraestructura">
                                <div style="text-align: center;">
                                    <h:outputText value="#{contrato11.nombreTipoInfraestructura}"
                                                  style="text-transform:uppercase;"/>
                                </div>
                            </p:column>
                            <p:column headerText="Concesión" styleClass="tabla-wrap">
                                <h:outputText value="#{contrato11.nombreConcesion}"/>
                            </p:column>
                            <p:column headerText="Modalidad" styleClass="tabla-wrap">
                                <h:outputText value="#{contrato11.nombreModalidad}"/>
                            </p:column>
                            <p:column headerText="Concesionario" styleClass="tabla-wrap">
                                <h:outputText value="#{contrato11.nombreConcesion}"/>
                            </p:column>
                            <p:column headerText="Seleccionar">
                                <div align="center">
                                    <p:commandButton icon="ui-icon-check"
                                                     actionListener="#{declararInversionMB.seleccionarContrato}" update=":form:datosConcesion
                                                            :form:datosCompromiso
                                                            :form:compromiso
                                                            :form:datosDeclaracion
                                                            :frmBuscarContratoDlg:pnlBuscarContratoDlg 
                                                            :frmBuscarContratoDlg:pnlBuscarContratoBtnDlg
                                                            :form:tablaAvanceInversion"
                                                     oncomplete="popupBuscarContrato.hide();">
                                        <f:attribute name="idcontrato" value="#{contrato11}"></f:attribute>
                                    </p:commandButton>
                                </div>
                            </p:column>
                        </p:dataTable>
                        <p:commandButton update=":frmBuscarContratoDlg:pnlBuscarContratoDlg  :frmBuscarContratoDlg:pnlBuscarContratoBtnDlg"
                                         process="@this" value="#{btn.btn_salir}"
                                         oncomplete="popupBuscarContrato.hide();">
                            <p:resetInput target=":frmBuscarContratoDlg:pnlBuscarContratoDlg :frmBuscarContratoDlg:pnlBuscarContratoBtnDlg"/>
                        </p:commandButton>
                    </p:panelGrid>
                </h:form>
            </p:dialog>
        </h:body>
    </html>
</f:view>