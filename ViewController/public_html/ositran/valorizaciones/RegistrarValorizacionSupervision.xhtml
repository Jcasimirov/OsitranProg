<?xml version='1.0' encoding='windows-1252'?>
<!DOCTYPE html>
<f:view xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets">
    <html xmlns="http://www.w3.org/1999/xhtml" xmlns:p="http://primefaces.org/ui">
        <h:head>
            <link href="#{request.contextPath}/css/style.css" rel="stylesheet" type="text/css"/>
            <script type="text/javascript">
              PrimeFaces.locales['es'] = {
                  closeText : 'Cerrar', prevText : 'Anterior', nextText : 'Siguiente', monthNames : ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'], monthNamesShort : ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'], dayNames : ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'], dayNamesShort : ['Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab'], dayNamesMin : ['D', 'L', 'M', 'X', 'J', 'V', 'S'], weekHeader : 'Semana', firstDay : 1, isRTL : false, showMonthAfterYear : false, yearSuffix : '', timeOnlyTitle : 'Sólo hora', timeText : 'Tiempo', hourText : 'Hora', minuteText : 'Minuto', secondText : 'Segundo', currentText : 'Fecha actual', ampm : false, month : 'Mes', week : 'Semana', day : 'Día', allDayText : 'Todo el día'
              };
            </script>
        </h:head>
        <h:body>
            <f:event listener="#{regValorizacionSupervisionMB.cargarListaMoneda()}" type="postAddToView"></f:event>
             
            <f:event listener="#{regValorizacionSupervisionMB.cargarListaconcepto()}" type="postAddToView"></f:event>
             
            <h:form id="form">
                <p:growl id="mensaje" showDetail="true" life="10000"/>
                <p:layout fullPage="true" style="border:none">
                    <p:layoutUnit position="center" style="border:0px">
                        <ui:include src="/ositran/util/menu.xhtml"/>
                        <div align="center">
                            <div align="center">
                                <h4 style="color: #003194;">REGISTRAR VALORIZACION DE SUPERVISION</h4>
                            </div>
                            <table style="font-size: 11px">
                                <tr>
                                    <td >
                                        <p:fieldset legend="Datos Contrato Concesion">
                                            <p:fieldset styleClass="fielsetinterno" id="busquedacontrato"
                                                        legend="Criterio de Busqueda">
                                                <table style="margin-bottom:5px;font-size: 11px">
                                                    <tr>
                                                        <td align="left" colspan="4">
                                                            Buscar Contrato Concesion: 
                                                            <h:inputHidden value="#{regValorizacionSupervisionMB.contratoConcesion}"
                                                                           readonly="false" id="inputContrato"
                                                                           style="width:300px"/>
                                                             
                                                            <p:commandButton id="searchContratos" image="ui-icon-search"
                                                                             update=":form:pListaContratos"
                                                                             oncomplete="pListaContratos.show()"
                                                                             actionListener="#{regValorizacionSupervisionMB.cargarListaContratos()}"/>
                                                             
                                                            <p:tooltip id="tool" styleClass="tool" for="searchContratos"
                                                                       value="Mostrar lista de contratos"/>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </p:fieldset>
                                            <br></br>
                                            <p:fieldset styleClass="fielsetinterno" legend="Datos Contrato Concesion"
                                                        id="dContratoConcesion">
                                                <table>
                                                    <tr>
                                                        <td align="left">Concesion</td>
                                                        <td>
                                                            <p:inputText readonly="true"
                                                                         value="#{regValorizacionSupervisionMB.t_concesion}"></p:inputText>
                                                        </td>
                                                    </tr>
                                                     
                                                    <tr>
                                                        <td align="left">Tipo Infraestructura</td>
                                                        <td>
                                                            <p:inputText readonly="true"
                                                                         value="#{regValorizacionSupervisionMB.t_tinfra}"></p:inputText>
                                                        </td>
                                                    </tr>
                                                     
                                                    <tr>
                                                        <td align="left">Modalidad Concesion</td>
                                                        <td>
                                                            <p:inputText readonly="true"
                                                                         value="#{regValorizacionSupervisionMB.t_modconc}"></p:inputText>
                                                        </td>
                                                    </tr>
                                                     
                                                    <tr>
                                                        <td align="left">Aeropuerto</td>
                                                        <td>
                                                            <p:selectOneMenu id="listaInfraestructura"
                                                                             value="#{regValorizacionSupervisionMB.infraestructuraSeleccionada}">
                                                                <f:selectItem itemLabel="-Selecione-" itemValue="0"/>
                                                                <f:selectItems value="#{regValorizacionSupervisionMB.listaInfraestructuras}"
                                                                               var="tip" itemLabel="#{tip.infNombre}"
                                                                               itemValue="#{tip.infId}"/>
                                                                <p:ajax event="valueChange"
                                                                        update=":form:listaInversiones :form:datosCompromiso"
                                                                        listener="#{regValorizacionSupervisionMB.cargarInversion()}"/>
                                                            </p:selectOneMenu>
                                                        </td>
                                                    </tr>
                                                     
                                                    <tr>
                                                        <td align="left">Inversion</td>
                                                        <td>
                                                            <p:selectOneMenu id="listaInversiones"
                                                                             value="#{regValorizacionSupervisionMB.inversionSeleccionada}">
                                                                <f:selectItem itemLabel="-Selecione-" itemValue="0"/>
                                                                <f:selectItems value="#{regValorizacionSupervisionMB.listaInversiones}"
                                                                               var="tip1"
                                                                               itemLabel="#{tip1.invDescripcion}"
                                                                               itemValue="#{tip1.invId}"/>
                                                            </p:selectOneMenu>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </p:fieldset>
                                            <br></br>
                                            <p:fieldset styleClass="fielsetinterno" id="datosCompromiso"
                                                        legend="#{leg.etaCo}">
                                                <table>
                                                    <tr>
                                                        <td colspan="1" align="left">
                                                            #{cam.setapa}
                                                        </td>
                                                        <td colspan="3" align="left">
                                                            <p:selectOneMenu id="listaCompromiso"
                                                                             value="#{regValorizacionSupervisionMB.contratoCompromisoSeleccionado}">
                                                                <f:selectItem itemLabel="-Selecione-" itemValue="0"/>
                                                                <f:selectItems value="#{regValorizacionSupervisionMB.listaContratoCompromiso}"
                                                                               var="tip2" itemLabel="#{tip2.ccoPeriodo}"
                                                                               itemValue="#{tip2.ccoId}"/>
                                                                <p:ajax event="valueChange"
                                                                        update=":form:datosCompromiso :form:plazo :form:total :form:moneda"
                                                                        listener="#{regValorizacionSupervisionMB.cargarDatosCompromiso()}"/>
                                                            </p:selectOneMenu>
                                                        </td>
                                                    </tr>
                                                     
                                                    <tr>
                                                        <td align="left">Plazo:</td>
                                                        <td align="left" colspan="3">
                                                            <p:inputText value="#{regValorizacionSupervisionMB.plazo}"
                                                                         readonly="true" size="10" id="plazo"/>
                                                        </td>
                                                    </tr>
                                                     
                                                    <tr>
                                                        <td align="left">Total:</td>
                                                        <td align="left">
                                                            <p:inputText value="#{regValorizacionSupervisionMB.total}"
                                                                         readonly="true" size="10" id="total"/>
                                                        </td>
                                                        <td align="left">Moneda:</td>
                                                        <td align="left">
                                                            <p:inputText value="#{regValorizacionSupervisionMB.codigoMoneda}"
                                                                         readonly="true" size="10" id="moneda"/>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </p:fieldset>
                                            <br></br>
                                            <p:fieldset styleClass="fielsetinterno" legend="#{leg.se}" id="supervisor">
                                                <table>
                                                    <tr>
                                                        <td colspan="2" align="left">Nombre Supervisor</td>
                                                        <td>
                                                            <p:inputText size="30"
                                                                         value="#{regValorizacionSupervisionMB.nomSupervisor}"
                                                                         readonly="true"/>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </p:fieldset>
                                        </p:fieldset>
                                    </td>
                                    <td valign="top">
                                        <p:fieldset legend="Datos Valorizacion de Supervision">
                                            <p:fieldset styleClass="fielsetinterno" legend="#{leg.dsdt}">
                                                <table style="width:100% ;font-size:11px;">
                                                    <tr>
                                                        <td align="left">
                                                            #{cam.numhr}
                                                             
                                                            <p:inputText style="width:100px" id="bnum"
                                                                         value="#{regValorizacionSupervisionMB.nrohr}"/>
                                                             
                                                            <p:watermark for="bnum" value="Ingrese Número"/>
                                                             
                                                            <p:inputText style="width:100px" id="bfecha"
                                                                         value="#{regValorizacionSupervisionMB.añohr}"/>
                                                             
                                                            <p:watermark for="bfecha" value="Ingrese Año"/>
                                                             
                                                            <p:commandButton image="ui-icon-search"
                                                                             actionListener="#{regValorizacionSupervisionMB.BuscarStd}"
                                                                             update=":form:freg :form:asuntohr"/>
                                                        </td>
                                                        <td align="left">
                                                            #{cam.FR}<p:inputText id="freg" readonly="true"
                                                                                  value="#{regValorizacionSupervisionMB.freg}"/>
                                                        </td>
                                                    </tr>
                                                     
                                                    <tr>
                                                        <td colspan="2" align="left">
                                                            #{cam.asu}
                                                             
                                                            <p:inputTextarea style="width:80%" id="asuntohr"
                                                                             readonly="true"
                                                                             value="#{regValorizacionSupervisionMB.asuntohr}"/>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </p:fieldset>
                                            <br></br>
                                            <div align="right">
                                                <table>
                                                    <tr>
                                                        <td colspan="2" align="left">Moneda</td>
                                                        <td colspan="2" align="left">
                                                            <p:selectOneMenu value="#{regValorizacionSupervisionMB.monedaSeleccionada}">
                                                                <f:selectItem itemLabel="-Seleccionar-" itemValue="0"/>
                                                                <f:selectItems value="#{regValorizacionSupervisionMB.listaMoneda}"
                                                                               var="mon" itemLabel="#{mon.monNombre}"
                                                                               itemValue="#{mon.monId}"/>
                                                            </p:selectOneMenu>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <br></br>
                                            <p:fieldset styleClass="fielsetinterno" legend="Datos Valorizacion">
                                                <table>
                                                    <tr>
                                                        <td>Concepto:</td>
                                                        <td>
                                                            <p:selectOneMenu value="#{regValorizacionSupervisionMB.conceptoSeleccionada}">
                                                                <f:selectItem itemLabel="-Seleccione-" itemValue="0"/>
                                                                <f:selectItems value="#{regValorizacionSupervisionMB.listaConcepto}"
                                                                               var="conc" itemLabel="#{conc.itdNombre}"
                                                                               itemValue="#{conc.itdId}"/>
                                                            </p:selectOneMenu>
                                                        </td>
                                                        <td>Monto Presentado</td>
                                                        <td>
                                                            <p:inputText style="width:60px"
                                                                         value="#{regValorizacionSupervisionMB.montoTabla}"/>
                                                        </td>
                                                        <td>
                                                            <p:selectBooleanCheckbox/>
                                                             
                                                            <h:outputText style="font-size:9px" value="Con IGV"/>
                                                        </td>
                                                        <td>
                                                            <p:commandButton value="Agregar" image="ui-icon-circle-plus"
                                                                             actionListener="#{regValorizacionSupervisionMB.guardarTabla()}"
                                                                             update=":form:tMonto"/>
                                                        </td>
                                                    </tr>
                                                </table>
                                                <p:dataTable emptyMessage="NO SE ENCONTRARON DATOS"
                                                             style="font-size:11px" id="tMonto" var="tMonto"
                                                             value="#{regValorizacionSupervisionMB.listaValorizacion}">
                                                    <p:column headerText="Descripción del Concepto">
                                                        <h:outputText value="#{tMonto.cvaId}"/>
                                                    </p:column>
                                                    <p:column headerText="Moneda" style="width:15px">
                                                        <h:outputText value="#{tMonto.monId}"/>
                                                    </p:column>
                                                    <p:column headerText="Neto" style="width:15px">
                                                        <h:outputText value="#{tMonto.neto}"/>
                                                    </p:column>
                                                    <p:column headerText="Igv" style="width:15px">
                                                        <h:outputText value="#{tMonto.igv}"/>
                                                    </p:column>
                                                    <p:column headerText="Total" style="width:15px">
                                                        <h:outputText value="#{tMonto.total}"/>
                                                    </p:column>
                                                    <p:column headerText="Eliminar" style="width:15px">
                                                        <div align="center">
                                                            <p:commandButton update=":form:tMonto"
                                                                             styleClass="controles"
                                                                             image="ui-icon-trash"/>
                                                        </div>
                                                    </p:column>
                                                </p:dataTable>
                                                <div align="right" class="negrita">
                                                    Total: 
                                                    <p:inputText readonly="true" style="width:50px"/>
                                                     
                                                    <p:inputText readonly="true" style="width:50px"/>
                                                     
                                                    <p:inputText readonly="true" style="width:50px"/>
                                                </div>
                                            </p:fieldset>
                                            <br></br>
                                        </p:fieldset>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div style="text-align:center;font-size: 11px">
                            <p:commandButton style="width:80px" value="Guardar"/>
                             
                            <p:commandButton style="width:80px" value="Limpiar" type="reset"/>
                        </div>
                    </p:layoutUnit>
                </p:layout>
                <p:dialog width="40%" header="Buscar Contrato de Concesion" widgetVar="pListaContratos"
                          id="pListaContratos" resizable="false" style="text-align:center;">
                    <p:dataTable paginatorPosition="bottom" rows="10" emptyMessage="NO SE ENCONTRARON DATOS"
                                 paginator="true" rowsPerPageTemplate="6,8,10" style="font-size:11px"
                                 id="tListaContrato" var="lContrato"
                                 value="#{regValorizacionSupervisionMB.listaContratos}">
                        <p:column headerText="ID" style="width:5px">
                            <h:outputText value="#{lContrato.conId}"/>
                        </p:column>
                        <p:column headerText="Nombre" style="width:50px">
                            <h:outputText value="#{lContrato.nombreConcesion}"/>
                        </p:column>
                        <p:column headerText="Elegir" style="width:5px">
                            <div align="center">
                                <p:commandButton oncomplete="pListaContratos.hide()"
                                                 actionListener="#{regValorizacionSupervisionMB.elegirContrato(lContrato)}"
                                                 image="ui-icon-circle-check" style="width:22px;height:22px"
                                                 update=":form:dContratoConcesion :form:inputContrato :form:listaInfraestructura :form:listaInversiones :form:supervisor"></p:commandButton>
                            </div>
                        </p:column>
                    </p:dataTable>
                </p:dialog>
            </h:form>
        </h:body>
    </html>
</f:view>