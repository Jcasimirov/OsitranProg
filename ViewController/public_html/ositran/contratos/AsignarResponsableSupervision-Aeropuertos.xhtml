<?xml version='1.0' encoding='windows-1252'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui">
    <h:head>
        <link href="#{request.contextPath}/css/estilo.css" rel="stylesheet" type="text/css"/>
        <script type="text/javascript">
          PrimeFaces.locales['es'] = {
              closeText : 'Cerrar', prevText : 'Anterior', nextText : 'Siguiente', monthNames : ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'], monthNamesShort : ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'], dayNames : ['Domingo', 'Lunes', 'Martes', 'MiÃ©rcoles', 'Jueves', 'Viernes', 'SÃ¡bado'], dayNamesShort : ['Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab'], dayNamesMin : ['D', 'L', 'M', 'X', 'J', 'V', 'S'], weekHeader : 'Semana', firstDay : 1, isRTL : false, showMonthAfterYear : false, yearSuffix : '', timeOnlyTitle : 'SÃ³lo hora', timeText : 'Tiempo', hourText : 'Hora', minuteText : 'Minuto', secondText : 'Segundo', currentText : 'Fecha actual', ampm : false, month : 'Mes', week : 'Semana', day : 'DÃ­a', allDayText : 'Todo el dÃ­a'
          };
        </script>
        <style type="text/css">
            .ui-panel .ui-panel-titlebar {
                color: #333333;
                font-family: Arial;
            }
        </style>
    </h:head>
    <ui:include src="/ositran/util/menuOpciones.xhtml"/>
    <h:body>
     <f:event listener="#{asignarResponsable_AeropuertoMB.validarSesion()}" type="postAddToView"></f:event>
        <f:event listener="#{asignarResponsable_AeropuertoMB.cargarListaTiposInfraestructura()}" type="postAddToView"></f:event>
         
        <h:form id="form">
        <p:growl id="mensaje" showDetail="true"  life="3000" />
            
            <div align="center">
                <h3 style="color:Black;font-weight:bold;font-family: sans-serif;">
                    #{msg.tituloAS}
                </h3>
            </div>
            <div align="center">
                <div align="center">
                    <table style="font-size:11px;width:90%">
                        <tr>
                            <td valign="top">
                                <p:fieldset legend="Datos contrato de Concesion">
                                    <table>
                                        <tr>
                                            <td>
                                                <p:fieldset legend="Conceción">
                                                    <p:inputText id="idNombreConcesion"
                                                                 value="#{asignarResponsable_AeropuertoMB.nombreContratoConcesion}"
                                                                 style="width:300px;text-transform:uppercase;"></p:inputText>
                                                    <p:commandButton value="#{btn.btn_buscar}"
                                                                     oncomplete="Dialog_ResultadoBusquedaContratoConcesion.show()"
                                                                     actionListener="#{asignarResponsable_AeropuertoMB.cargarListaContratos()}"
                                                                     update=":form:DataTable_ResultadoBusquedaContratosConcesion"/>
                                                </p:fieldset>
                                            </td>
                                        </tr>
                                         
                                        <tr>
                                            <td>
                                                <p:fieldset styleClass="fielsetinterno"
                                                            legend="Datos Contrato de Concesion">
                                                    <table>
                                                        <tr>
                                                            <td align="left">Nombre de concesión</td>
                                                            <td>
                                                                <p:inputText id="idNameConcesion"
                                                                             value="#{asignarResponsable_AeropuertoMB.nameContrato}"
                                                                             style="width:300px;text-transform:uppercase;"></p:inputText>
                                                            </td>
                                                        </tr>
                                                         
                                                        <tr>
                                                            <td align="left">Tipo de infraestructura</td>
                                                            <td>
                                                                <p:inputText id="idNameTipoInfraestructura"
                                                                             value="#{asignarResponsable_AeropuertoMB.nameTipoInfraestructura}"
                                                                             style="width:300px;text-transform:uppercase;"></p:inputText>
                                                            </td>
                                                        </tr>
                                                         
                                                        <tr>
                                                            <td align="left">Modalidad de Concesión</td>
                                                            <td>
                                                                <p:inputText id="idNameModalidadConcecion"
                                                                             value="#{asignarResponsable_AeropuertoMB.nameModalidadConcesion}"
                                                                             style="width:300px;text-transform:uppercase;"></p:inputText>
                                                            </td>
                                                        </tr>
                                                         
                                                         <tr>
                                                           
                                                           <td  align="left">Aeropuerto</td>
                                                            <td  align="left">
                                                                <p:selectOneMenu id="listaAeropuerto"  value="#{asignarResponsable_AeropuertoMB.codigoAeropuerto}" style="width:300px;text-transform:uppercase;">
                                                                    <f:selectItem   itemLabel="-Selecione-" itemValue="0" />
                                                                    <f:selectItems  value="#{asignarResponsable_AeropuertoMB.listaAeropuerto}" var="aero" itemLabel="#{aero.infNombre}" itemValue="#{aero.infId}" />
                                                                    <p:ajax event="valueChange" update=":form:listaInversiones :form:listaCompromiso" listener="#{asignarResponsable_AeropuertoMB.cargarInversiones()}"  />
                                                                </p:selectOneMenu>
                                                            </td>
                                                        </tr>
                                                        
                                                        <tr>
                                                           
                                                           <td  align="left">Inversion</td>
                                                            <td  align="left">
                                                                <p:selectOneMenu id="listaInversiones"  value="#{asignarResponsable_AeropuertoMB.codigoInversion}" style="width:300px;text-transform:uppercase;">
                                                                    <f:selectItem   itemLabel="-Selecione-" itemValue="0" />
                                                                    <f:selectItems  value="#{asignarResponsable_AeropuertoMB.listaInversiones}" var="inversion" itemLabel="#{inversion.invDescripcion}" itemValue="#{inversion.invId}" />
                                                                    <p:ajax event="valueChange" update=":form:listaCompromiso" listener="#{asignarResponsable_AeropuertoMB.cargarCompromiso()}"  />
                                                                </p:selectOneMenu>
                                                            </td>
                                                        </tr>
                                    
                                                    </table>
                                                </p:fieldset>
                                            </td>
                                        </tr>
                                         
                                        <tr>
                                            <td>
                                            <p:fieldset styleClass="fielsetinterno" id="datosCompromiso" legend="#{leg.etaCo}">
                                               
                                                    <table>
                                                        <tr>
                                                            <td align="left">Etapa</td>
                                                            <td align="left" colspan="3">
                                                                <p:selectOneMenu id="listaCompromiso"  value="#{asignarResponsable_AeropuertoMB.contratoCompromisoSeleccionado}" style="width:370px;text-transform:uppercase;">
                                                                    <f:selectItem   itemLabel="-Selecione-" itemValue="0" />
                                                                    <f:selectItems  value="#{asignarResponsable_AeropuertoMB.listaContratoCompromiso}" var="tip2" itemLabel="#{tip2.ccoPeriodo}" itemValue="#{tip2.ccoId}"/>
                                                                    <p:ajax event="valueChange" update=":form:datosCompromiso :form:listaResponsables :form:cbosupervisor" listener="#{asignarResponsable_AeropuertoMB.cargarDatosCompromiso()}"  />
                                                                </p:selectOneMenu>
                                                            </td>
                                                        </tr>
                                                        <tr>
          <td align="left">Plazo:</td>
          <td align="left" colspan="3"><p:inputText value="#{asignarResponsable_AeropuertoMB.plazo}"  readonly="true"/></td>
         </tr>
 
         <tr>
          <td align="left">Total:</td>
          <td align="left" ><p:inputText value="#{asignarResponsable_AeropuertoMB.total}" readonly="true"></p:inputText></td>
          <td align="left">#{cam.mon}</td>
          <td align="left"><p:inputText value="#{asignarResponsable_AeropuertoMB.nombreMoneda}" readonly="true"></p:inputText></td>
         </tr>
         </table>
                                                         
                                                       
                                                </p:fieldset>
                                            </td>
                                        </tr>
                                    </table>
                                </p:fieldset>
                            </td>
                            <td>
                                <p:fieldset styleClass="fielsetinterno" legend="Criterios de Busqueda">
                                    <p:fieldset id="idBusquedaSupervisor" legend="Busqueda Coordinador Insitu">
                                        <table>
                                            <tr>
                                                
                                                <td>Supervision de Inversiones</td>
                                                <td>
                                                    <p:selectOneMenu id="cbosupervisor"
                                                                     value="#{asignarResponsable_AeropuertoMB.codigoSupervisor}"
                                                                     style="width:150px;text-transform:uppercase;">
                                                       
                                                        <f:selectItem itemValue="0" itemLabel="-Seleccione-"/>
                                                        <f:selectItems value="#{asignarResponsable_AeropuertoMB.listarSupervisoresxInfraestructura}"
                                                                       var="sup" itemLabel="#{sup.tsiNombre}"
                                                                       itemValue="#{sup.tsiId}"/>
                                                    </p:selectOneMenu></td>
                                                    <td>
                                                    <p:commandButton value="Asignar"
                                                                 actionListener="#{asignarResponsable_AeropuertoMB.seleccionarSupervisor()}"
                                                                 update=":form:listaResponsables :form:mensaje"/>
                                                </td>
                                            </tr>
                                        </table>
                                    </p:fieldset>
                                    <br></br>
                                    <p:fieldset id="idBusquedaEmpSup" legend="Busqueda Empresa Supervisora">
                                    <table>
                                        <tr>
                                            <td>
                                            Nombre Empresa
                                                <p:inputText  id="idNombreEmpresaSupervisora"
                                                             value="#{asignarResponsable_AeropuertoMB.nombreEmpresaSupervisora}"
                                                             style="width:200px;text-transform:uppercase;"></p:inputText>
                                                             </td><td>
                                           Ruc Empresa      
                                                <p:inputText id="idRucEmpresaSupervisora"
                                                             value="#{asignarResponsable_AeropuertoMB.rucEmpresaSupervisora}"
                                                             style="width:100px;text-transform:uppercase;"></p:inputText>
                                                 
                                                <p:commandButton value="#{btn.btn_buscar}"
                                                                 actionListener="#{asignarResponsable_AeropuertoMB.filtrarListaEmpSup()}"
                                                                 update=":form:DataTable_ResultadoBusquedaEmpresa :form:mensaje"
                                                                 />
                                                 
                                                <p:dialog header="EMPRESAS SUPERVISORAS"
                                                          widgetVar="Dialog_ResultadoBusquedaEmpresa"
                                                          id="Dialog_ResultadoBusquedaEmpresa" modal="true"
                                                          style="text-align:center;">
                                                    <p:dataTable style="font-size:11px;text-align:center"
                                                                 id="DataTable_ResultadoBusquedaEmpresa"
                                                                 value="#{asignarResponsable_AeropuertoMB.listaEmpresasSup}"
                                                                 var="var1">
                                                        <p:column headerText="emps sup">
                                                            <h:outputText value="#{var1.supNombre}"
                                                                          style="width:300px;text-transform:uppercase;"/>
                                                        </p:column>
                                                        <p:column headerText="Elegir">
                                                            <p:commandButton actionListener="#{asignarResponsable_AeropuertoMB.seleccionarEmpresa}"
                                                                             icon="ui-search"
                                                                             update=":form:listaResponsables :form:mensaje"
                                                                             oncomplete="Dialog_ResultadoBusquedaEmpresa.hide();">
                                                                <f:attribute name="empresa" value="#{var1}"></f:attribute>
                                                            </p:commandButton>
                                                        </p:column>
                                                    </p:dataTable>
                                                </p:dialog>
                                            </td>
                                        </tr>
                                    </table>
                                    </p:fieldset>
                                     </p:fieldset>
                                     <br></br>
                                     <p:fieldset id="idResultadoAsig" legend="Lista Responsables Asignados">
                                    <p:dataTable value="#{asignarResponsable_AeropuertoMB.listaResponsables}" rowIndexVar="rowId"
                                                 var="list" id="listaResponsables">
                                        <p:column headerText="N° Documento">
                                            <h:outputText value="#{list.numeroDocumento}"
                                                          style="width:300px;text-transform:uppercase; "/>
                                        </p:column>
                                        <p:column headerText="Tipo Documento">
                                            <h:outputText value="#{list.tipoDocumento}"
                                                          style="width:300px;text-transform:uppercase; "/>
                                        </p:column>
                                        <p:column headerText="Nombre">
                                            <h:outputText value="#{list.nombre}"
                                                          style="width:300px;text-transform:uppercase; "/>
                                        </p:column>
                                        <p:column headerText="Fecha Asignación">
                                            <h:outputText value="#{list.fechaAsignacion}"
                                                          style="width:300px;text-transform:uppercase; "/>
                                        </p:column>
                                        <p:column headerText="Estado">
                                            <h:outputText value="#{list.estado}"
                                                          style="width:300px;text-transform:uppercase; "/>
                                        </p:column>
                                        <p:column headerText="Eliminar" rendered="#{asignarResponsable_AeropuertoMB.rolOpcion.troEliminar eq 1}">
                                            <p:commandButton actionListener="#{asignarResponsable_AeropuertoMB.eliminacionConfirmadaResponsable()}"
                                                             image="ui-icon-document" style="width:25px;height:25px"
                                                             update=":form:listaResponsables">
                                                <f:param name="rowId" id="rowId" value="#{rowId}"/>
                                                <f:param name="rowIdCod" id="rowIdCod" value="#{list.id}"/>
                                                
                                                
                                            </p:commandButton>
                                        </p:column>
                                        <p:column headerText="Desactivar" rendered="#{asignarResponsable_AeropuertoMB.rolOpcion.troModificar eq 1}">
                                            <p:commandButton rendered="#{list.codEstado eq 1}" actionListener="#{asignarResponsable_AeropuertoMB.desactivarConfirmadaResponsable()}"
                                                             image="ui-icon-document" style="width:25px;height:25px"
                                                             update=":form:listaResponsables">
                                                <f:param name="rowIdE" id="rowIdE" value="#{rowId}"/>
                                                <f:param name="rowIdCodDes" id="rowIdCodDes" value="#{list.id}"/>
                                                 
                                            </p:commandButton>
                                        </p:column>
                                    </p:dataTable>
                                </p:fieldset>
                               
                                <br></br>
                                 
                            
                                 
                                <br></br>
                            </td>
                        </tr>
                    </table>
                </div>
              
                <table style="width:80% ;font-size:11px;">
                    <tr>
                        <td align="center">
                            <p:commandButton rendered="#{asignarResponsable_AeropuertoMB.rolOpcion.troAgregar eq 1}" value="Guardar" actionListener="#{asignarResponsable_AeropuertoMB.Guardar()}" update=":form:datosCompromiso :form:listaResponsables :form:mensaje "/>                                               
                            
                        </td>
                    </tr>
                </table>
                <p:dialog header="CONCESIONES" widgetVar="Dialog_ResultadoBusquedaContratoConcesion"
                          id="Dialog_ResultadoBusquedaContratoConcesion" modal="true" style="text-align:center;">
                    <p:dataTable style="font-size:11px;text-align:center"
                                 id="DataTable_ResultadoBusquedaContratosConcesion" var="var2"
                                 value="#{asignarResponsable_AeropuertoMB.listaContratosConcesion}">
                        <p:column headerText="Nombre de la Concesión">
                            <h:outputText value="#{var2.nombreConcesion}"
                                          style="width:300px;text-transform:uppercase;"/>
                        </p:column>
                        <p:column headerText="Nombre del Tipo Infraestructura">
                            <h:outputText value="#{var2.nombreTipoInfraestructura}"
                                          style="width:300px;text-transform:uppercase;"/>
                        </p:column>
                        <p:column headerText="Nombre de la Modalidad">
                            <h:outputText value="#{var2.nombreModalidad}"
                                          style="width:300px;text-transform:uppercase;"/>
                        </p:column>
                        <p:column headerText="Elegir">
                            <p:commandButton actionListener="#{asignarResponsable_AeropuertoMB.seleccionarContratoConcesion1}"
                                             icon="ui-search"
                                             update=":form:idNameConcesion :form:idNameTipoInfraestructura :form:idNameModalidadConcecion :form:listaCompromiso :form:listaAeropuerto"
                                             oncomplete="Dialog_ResultadoBusquedaContratoConcesion.hide();">
                                <f:attribute name="contrato" value="#{var2}"></f:attribute>
                            </p:commandButton>
                        </p:column>
                    </p:dataTable>
                </p:dialog>
            </div>
        </h:form>
    </h:body>
</html>