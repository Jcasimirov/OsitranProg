<?xml version='1.0' encoding='windows-1252'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui">
    <h:head>
        <link href="#{request.contextPath}/css/estilo.css" rel="stylesheet" type="text/css"/>
        <script type="text/javascript">
          PrimeFaces.locales['es'] = {
              closeText : 'Cerrar', prevText : 'Anterior', nextText : 'Siguiente', monthNames : ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'], monthNamesShort : ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'], dayNames : ['Domingo', 'Lunes', 'Martes', 'Mi√©rcoles', 'Jueves', 'Viernes', 'S√°bado'], dayNamesShort : ['Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab'], dayNamesMin : ['D', 'L', 'M', 'X', 'J', 'V', 'S'], weekHeader : 'Semana', firstDay : 1, isRTL : false, showMonthAfterYear : false, yearSuffix : '', timeOnlyTitle : 'S√≥lo hora', timeText : 'Tiempo', hourText : 'Hora', minuteText : 'Minuto', secondText : 'Segundo', currentText : 'Fecha actual', ampm : false, month : 'Mes', week : 'Semana', day : 'D√≠a', allDayText : 'Todo el d√≠a'
          };
        </script>
        <style type="text/css">
            .ui-panel .ui-panel-titlebar {
                color: #333333;
                font-family: Century Gothic, sans-serif;
            }
        </style>
    </h:head>
    <h:body>
        <f:event listener="#{asignarResponsableMB.cargarListaTiposInfraestructura()}" type="postAddToView"></f:event>
         
        <h:form id="form">
            <ui:include src="/ositran/util/menu.xhtml"/>
            <div align="center">
                <h3 style="color:Black;font-weight:bold;font-family: sans-serif;">
                    #{msg.tituloAS}
                </h3>
            </div>
            <div align="center">
                <div align="center">
                    <table style="font-size:11px;width:90%">
                        <tr>
                            <td valign="top">
                                <p:fieldset legend="Datos contrato de Concesion">
                                    <table>
                                        <tr>
                                            <td>
                                                <p:fieldset legend="ConceciÛn">
                                                    <p:inputText id="idNombreConcesion"
                                                                 value="#{asignarResponsableMB.nombreContratoConcesion}"
                                                                 style="width:300px;text-transform:uppercase;"></p:inputText>
                                                    <p:commandButton value="#{btn.btn_buscar}"
                                                                     oncomplete="Dialog_ResultadoBusquedaContratoConcesion.show()"
                                                                     actionListener="#{asignarResponsableMB.cargarListaContratos()}"
                                                                     update=":form:DataTable_ResultadoBusquedaContratosConcesion"/>
                                                </p:fieldset>
                                            </td>
                                        </tr>
                                         
                                        <tr>
                                            <td>
                                                <p:fieldset styleClass="fielsetinterno"
                                                            legend="Datos Contrato de Concesion">
                                                    <table>
                                                        <tr>
                                                            <td align="left">Nombre de concesi&#243;n</td>
                                                            <td>
                                                                <p:inputText id="idNameConcesion"
                                                                             value="#{asignarResponsableMB.nameContrato}"
                                                                             style="width:300px;text-transform:uppercase;"></p:inputText>
                                                            </td>
                                                        </tr>
                                                         
                                                        <tr>
                                                            <td align="left">Tipo de infraestructura</td>
                                                            <td>
                                                                <p:inputText id="idNameTipoInfraestructura"
                                                                             value="#{asignarResponsableMB.nameTipoInfraestructura}"
                                                                             style="width:300px;text-transform:uppercase;"></p:inputText>
                                                            </td>
                                                        </tr>
                                                         
                                                        <tr>
                                                            <td align="left">Modalidad de Concesi&#243;n</td>
                                                            <td>
                                                                <p:inputText id="idNameModalidadConceciÛn"
                                                                             value="#{asignarResponsableMB.nameModalidadConcesion}"
                                                                             style="width:300px;text-transform:uppercase;"></p:inputText>
                                                            </td>
                                                        </tr>
                                                         
                                                        <tr>
                                                            <td align="left">Modelaidad de inversion</td>
                                                            <td>
                                                                <p:inputText></p:inputText>
                                                            </td>
                                                        </tr>
                                                         
                                                        <tr>
                                                            <td align="left">Nombre de concesionario</td>
                                                            <td>
                                                                <p:inputText></p:inputText>
                                                            </td>
                                                        </tr>
                                                         
                                                        <tr>
                                                            <td align="left">Infraestructura</td>
                                                            <td>
                                                                <p:selectOneMenu>
                                                                    <f:selectItem itemLabel="-Seleccione-"
                                                                                  itemValue="4"/>
                                                                    <f:selectItem itemLabel="Infraestructura1"
                                                                                  itemValue="1"/>
                                                                    <f:selectItem itemLabel="Infraestructura2"
                                                                                  itemValue="2"/>
                                                                    <f:selectItem itemLabel="Infraestructura3"
                                                                                  itemValue="3"/>
                                                                </p:selectOneMenu>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </p:fieldset>
                                            </td>
                                        </tr>
                                         
                                        <tr>
                                            <td>
                                                <p:fieldset styleClass="fielsetinterno" legend="Etapa Concesi√≥n">
                                                    <table>
                                                        <tr>
                                                            <td colspan="2" align="left">Seleccione Etapa</td>
                                                            <td colspan="2" align="left">
                                                                <p:selectOneMenu>
                                                                    <f:selectItem itemLabel="-Seleccione-"
                                                                                  itemValue="4"/>
                                                                    <f:selectItem itemLabel="Etapa1" itemValue="1"/>
                                                                    <f:selectItem itemLabel="Etapa2" itemValue="2"/>
                                                                    <f:selectItem itemLabel="Etapa3" itemValue="3"/>
                                                                </p:selectOneMenu>
                                                            </td>
                                                        </tr>
                                                         
                                                        <tr>
                                                            <td align="left">Alcance</td>
                                                            <td colspan="3" align="left">
                                                                <p:inputText style="width: 300px" disabled="true"></p:inputText>
                                                            </td>
                                                        </tr>
                                                         
                                                        <tr>
                                                            <td align="left">Inicio</td>
                                                            <td align="left">
                                                                <p:calendar locale="es" pattern="yyyy-MMM-dd "/>
                                                            </td>
                                                            <td align="left">Fin</td>
                                                            <td align="left">
                                                                <p:calendar locale="es" pattern="yyyy-MMM-dd"/>
                                                            </td>
                                                        </tr>
                                                         
                                                        <tr>
                                                            <td align="left">Total</td>
                                                            <td align="left" disabled="true">
                                                                <p:inputText></p:inputText>
                                                            </td>
                                                            <td align="left">Moneda</td>
                                                            <td align="left" disabled="true">
                                                                <p:inputText></p:inputText>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </p:fieldset>
                                            </td>
                                        </tr>
                                    </table>
                                </p:fieldset>
                            </td>
                            <td>
                                <p:fieldset styleClass="fielsetinterno" legend="Criterios de Busqueda">
                                    <p:fieldset id="idBusquedaSupervisor" legend="Busqueda Supervisor">
                                        <table>
                                            <tr>
                                                <td>Tipo Infraestructura</td>
                                                <td>
                                                    <p:selectOneMenu id="tipobuscar"
                                                                     value="#{asignarResponsableMB.codigoTipoInfraestructurafiltro}"
                                                                     style="width:150px;text-transform:uppercase">
                                                        <p:ajax listener="#{asignarResponsableMB.cargarSupervisoresxInfraestructura()}"
                                                                update=":form:cbosupervisor"/>
                                                        <f:selectItem itemValue="0" itemLabel="-Seleccione-"/>
                                                        <f:selectItems value="#{asignarResponsableMB.listaInfraestructuraTipos}"
                                                                       var="tip" itemLabel="#{tip.tinNombre}"
                                                                       itemValue="#{tip.tinId}"/>
                                                    </p:selectOneMenu>
                                                </td>
                                                <td>Supervision de Inversiones</td>
                                                <td>
                                                    <p:selectOneMenu id="cbosupervisor"
                                                                     value="#{asignarResponsableMB.codigoSupervisor}"
                                                                     style="width:150px;text-transform:uppercase;">
                                                        <p:ajax listener="#{asignarResponsableMB.seleccionarSupervisor()}"
                                                                update=":form:listaResponsables"/>
                                                        <f:selectItem itemValue="0" itemLabel="-Seleccione-"/>
                                                        <f:selectItems value="#{asignarResponsableMB.listarSupervisoresxInfraestructura}"
                                                                       var="sup" itemLabel="#{sup.tsiNombre}"
                                                                       itemValue="#{sup.tsiId}"/>
                                                    </p:selectOneMenu>
                                                </td>
                                            </tr>
                                        </table>
                                    </p:fieldset>
                                    <table>
                                        <tr>
                                            <td>
                                            Nombre Empresa
                                                <p:inputText  id="idNombreEmpresaSupervisora"
                                                             value="#{asignarResponsableMB.nombreEmpresaSupervisora}"
                                                             style="width:300px;text-transform:uppercase;"></p:inputText>
                                                             </td><td>
                                           Ruc Empresa      
                                                <p:inputText id="idRucEmpresaSupervisora"
                                                             value="#{asignarResponsableMB.rucEmpresaSupervisora}"
                                                             style="width:300px;text-transform:uppercase;"></p:inputText>
                                                 
                                                <p:commandButton value="#{btn.btn_buscar}"
                                                                 actionListener="#{asignarResponsableMB.filtrarListaEmpSup()}"
                                                                 update=":form:DataTable_ResultadoBusquedaEmpresa"
                                                                 oncomplete="Dialog_ResultadoBusquedaEmpresa.show();"/>
                                                 
                                                <p:dialog header="EMPRESAS SUPERVISORAS"
                                                          widgetVar="Dialog_ResultadoBusquedaEmpresa"
                                                          id="Dialog_ResultadoBusquedaEmpresa" modal="true"
                                                          style="text-align:center;">
                                                    <p:dataTable style="font-size:11px;text-align:center"
                                                                 id="DataTable_ResultadoBusquedaEmpresa"
                                                                 value="#{asignarResponsableMB.listaEmpresasSup}"
                                                                 var="var1">
                                                        <p:column headerText="emps sup">
                                                            <h:outputText value="#{var1.supNombre}"
                                                                          style="width:300px;text-transform:uppercase;"/>
                                                        </p:column>
                                                        <p:column headerText="Elegir">
                                                            <p:commandButton actionListener="#{asignarResponsableMB.seleccionarEmpresa}"
                                                                             icon="ui-search"
                                                                             update=":form:listaResponsables"
                                                                             oncomplete="Dialog_ResultadoBusquedaEmpresa.hide();">
                                                                <f:attribute name="empresa" value="#{var1}"></f:attribute>
                                                            </p:commandButton>
                                                        </p:column>
                                                    </p:dataTable>
                                                </p:dialog>
                                            </td>
                                        </tr>
                                    </table>
                                    <p:dataTable value="#{asignarResponsableMB.listaResponsables}" rowIndexVar="rowId"
                                                 var="list" id="listaResponsables">
                                        <p:column headerText="numeroDocumento">
                                            <h:outputText value="#{list.numeroDocumento}"
                                                          style="width:300px;text-transform:uppercase; "/>
                                        </p:column>
                                        <p:column headerText="tipoDocumento">
                                            <h:outputText value="#{list.tipoDocumento}"
                                                          style="width:300px;text-transform:uppercase; "/>
                                        </p:column>
                                        <p:column headerText="nombre">
                                            <h:outputText value="#{list.nombre}"
                                                          style="width:300px;text-transform:uppercase; "/>
                                        </p:column>
                                        <p:column headerText="fechaAsignacion">
                                            <h:outputText value="#{list.fechaAsignacion}"
                                                          style="width:300px;text-transform:uppercase; "/>
                                        </p:column>
                                        <p:column headerText="estado">
                                            <h:outputText value="#{list.estado}"
                                                          style="width:300px;text-transform:uppercase; "/>
                                        </p:column>
                                        <p:column headerText="ELIMINAR">
                                            <p:commandButton actionListener="#{asignarResponsableMB.eliminacionConfirmadaResponsable()}"
                                                             image="ui-icon-document" style="width:25px;height:25px"
                                                             update=":form:listaResponsables">
                                                <f:param name="rowId" id="rowId" value="#{rowId}"/>
                                            </p:commandButton>
                                        </p:column>
                                    </p:dataTable>
                                </p:fieldset>
                                
                                <br></br>
                                 
                                <p:fieldset styleClass="fielsetinterno" legend="Supervicion Empresa Supervisora">
                                    <br></br>
                                </p:fieldset>
                                 
                                <br></br>
                            </td>
                        </tr>
                    </table>
                </div>
                <p:dialog widgetVar="alerta" header="Confirmar" modal="true">
                    <table style="font-size: 11px">
                        <tr>
                            <td colspan="2">Desea Desactivar El(los) ususarios Seleccionados</td>
                        </tr>
                         
                        <tr>
                            <td align="right">
                                <p:commandButton value="Aceptar"/>
                            </td>
                            <td align="left">
                                <p:commandButton value="Cancelar" onclick="alerta.hide();"/>
                            </td>
                        </tr>
                    </table>
                </p:dialog>
                <table style="width:80% ;font-size:11px;">
                    <tr>
                        <td align="center">
                            <p:commandButton value="Guardar"/>
                             
                            <p:commandButton value="Activar"/>
                             
                            <p:commandButton value="Desactivar" onclick="alerta.show();"/>
                             
                            <p:commandButton value="Salir"/>
                        </td>
                    </tr>
                </table>
                <p:dialog header="CONCESIONES" widgetVar="Dialog_ResultadoBusquedaContratoConcesion"
                          id="Dialog_ResultadoBusquedaContratoConcesion" modal="true" style="text-align:center;">
                    <p:dataTable style="font-size:11px;text-align:center"
                                 id="DataTable_ResultadoBusquedaContratosConcesion" var="var2"
                                 value="#{asignarResponsableMB.listaContratosConcesion}">
                        <p:column headerText="emps sup">
                            <h:outputText value="#{var2.nombreConcesion}"
                                          style="width:300px;text-transform:uppercase;"/>
                        </p:column>
                        <p:column headerText="Elegir">
                            <p:commandButton actionListener="#{asignarResponsableMB.seleccionarContratoConcesion1}"
                                             icon="ui-search"
                                             update=":form:idNameConcesion :form:idNameTipoInfraestructura :form:idNameModalidadConceciÛn"
                                             oncomplete="Dialog_ResultadoBusquedaContratoConcesion.hide();">
                                <f:attribute name="contrato" value="#{var2}"></f:attribute>
                            </p:commandButton>
                        </p:column>
                    </p:dataTable>
                </p:dialog>
            </div>
        </h:form>
    </h:body>
</html>